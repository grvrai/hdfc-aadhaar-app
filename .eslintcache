[{"/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/index.js":"1","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/theme.js":"2","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/App.js":"3","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/constants.js":"4","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/services/auth-service.js":"5","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/Components/MenuAppBar.js":"6","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/Components/BottomNav.js":"7","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/services/peakpwa.js":"8","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/routes/RestrictedRoute.js":"9","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/routes/PrivateRoute.js":"10","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/pages/Home/HomeView.js":"11","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/pages/Login/LoginPage.js":"12","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/pages/CustomerDataPage/CustomerDataPage.js":"13","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/pages/NotificationPage/NotificationPage.js":"14","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/pages/Home/HomeActionsList.js":"15","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/pages/Home/UserCard.js":"16","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/pages/Home/NotificationPermWidget.js":"17","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/helpers/helpers.js":"18","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/pages/CustomerDataPage/CustomerDataForm.js":"19","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/pages/CustomerDataPage/CustomerDataList.js":"20","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/pages/MarketingActivity/MarketingActivityPage.js":"21","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/pages/MarketingActivity/MarketingActivityForm.js":"22","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/pages/MarketingActivity/MarketingActivityList.js":"23","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/pages/DailyActivityPage/DailyActivityPage.js":"24","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/pages/DailyActivityPage/DailyActivityForm.js":"25","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/pages/DailyActivityPage/DailyActivityList.js":"26","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/pages/IssuePage/IssuePage.js":"27","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/pages/IssuePage/IssueList.js":"28","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/pages/IssuePage/IssueForm.js":"29","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/Components/PageHeader.js":"30","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/services/customer-data-service.js":"31","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/Components/FormContainer.js":"32","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/pages/Home/CustomerDataWidget.js":"33","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/pages/Home/DailyDataWidget.js":"34","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/Components/ConfirmationDialogProvider.js":"35","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/Components/LoadingButton.js":"36","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/pages/Home/RecentNotification.js":"37","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/pages/NotificationPage/NotificationContainer.js":"38","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/pages/Login/ChangePasswordForm.js":"39","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/service-worker.js":"40"},{"size":1980,"mtime":1609161058484,"results":"41","hashOfConfig":"42"},{"size":1718,"mtime":1608553605917,"results":"43","hashOfConfig":"42"},{"size":5016,"mtime":1609157725526,"results":"44","hashOfConfig":"42"},{"size":1408,"mtime":1609236865411,"results":"45","hashOfConfig":"42"},{"size":2442,"mtime":1609235174766,"results":"46","hashOfConfig":"42"},{"size":4722,"mtime":1608732507611,"results":"47","hashOfConfig":"42"},{"size":1410,"mtime":1609240844276,"results":"48","hashOfConfig":"42"},{"size":43914,"mtime":1609157957072,"results":"49","hashOfConfig":"42"},{"size":1081,"mtime":1607341592014,"results":"50","hashOfConfig":"42"},{"size":1079,"mtime":1607340433305,"results":"51","hashOfConfig":"42"},{"size":2068,"mtime":1609165844452,"results":"52","hashOfConfig":"42"},{"size":12871,"mtime":1608813570004,"results":"53","hashOfConfig":"42"},{"size":764,"mtime":1609235174763,"results":"54","hashOfConfig":"42"},{"size":3881,"mtime":1609245375198,"results":"55","hashOfConfig":"42"},{"size":1779,"mtime":1608556144097,"results":"56","hashOfConfig":"42"},{"size":2600,"mtime":1608226804761,"results":"57","hashOfConfig":"42"},{"size":2020,"mtime":1608555581856,"results":"58","hashOfConfig":"42"},{"size":3981,"mtime":1609240768049,"results":"59","hashOfConfig":"42"},{"size":10550,"mtime":1609235174766,"results":"60","hashOfConfig":"42"},{"size":8526,"mtime":1609252040758,"results":"61","hashOfConfig":"42"},{"size":735,"mtime":1608724254726,"results":"62","hashOfConfig":"42"},{"size":5999,"mtime":1609251364954,"results":"63","hashOfConfig":"42"},{"size":6152,"mtime":1609251991322,"results":"64","hashOfConfig":"42"},{"size":708,"mtime":1608727906166,"results":"65","hashOfConfig":"42"},{"size":8231,"mtime":1609307483609,"results":"66","hashOfConfig":"42"},{"size":4261,"mtime":1609305026779,"results":"67","hashOfConfig":"42"},{"size":643,"mtime":1608724273124,"results":"68","hashOfConfig":"42"},{"size":6982,"mtime":1609244982983,"results":"69","hashOfConfig":"42"},{"size":7516,"mtime":1609306195278,"results":"70","hashOfConfig":"42"},{"size":1043,"mtime":1609240727699,"results":"71","hashOfConfig":"42"},{"size":6051,"mtime":1609245738620,"results":"72","hashOfConfig":"42"},{"size":532,"mtime":1608635256085,"results":"73","hashOfConfig":"42"},{"size":4367,"mtime":1609245877730,"results":"74","hashOfConfig":"42"},{"size":4114,"mtime":1609235174763,"results":"75","hashOfConfig":"42"},{"size":2930,"mtime":1608553532276,"results":"76","hashOfConfig":"42"},{"size":648,"mtime":1608569001639,"results":"77","hashOfConfig":"42"},{"size":3152,"mtime":1609166239919,"results":"78","hashOfConfig":"42"},{"size":1747,"mtime":1609245244100,"results":"79","hashOfConfig":"42"},{"size":6415,"mtime":1608813090959,"results":"80","hashOfConfig":"42"},{"size":2837,"mtime":1609160431859,"results":"81","hashOfConfig":"42"},{"filePath":"82","messages":"83","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"84"},"1midmro",{"filePath":"85","messages":"86","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"84"},{"filePath":"87","messages":"88","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"84"},{"filePath":"89","messages":"90","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"91","messages":"92","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"93","usedDeprecatedRules":"84"},{"filePath":"94","messages":"95","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"96","usedDeprecatedRules":"84"},{"filePath":"97","messages":"98","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"99","messages":"100","errorCount":0,"warningCount":45,"fixableErrorCount":0,"fixableWarningCount":1,"source":"101","usedDeprecatedRules":"84"},{"filePath":"102","messages":"103","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"104"},{"filePath":"105","messages":"106","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"104"},{"filePath":"107","messages":"108","errorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"109","usedDeprecatedRules":"84"},{"filePath":"110","messages":"111","errorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"112","usedDeprecatedRules":"84"},{"filePath":"113","messages":"114","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"115","usedDeprecatedRules":"84"},{"filePath":"116","messages":"117","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"118","messages":"119","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"120","usedDeprecatedRules":"84"},{"filePath":"121","messages":"122","errorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"123","usedDeprecatedRules":"84"},{"filePath":"124","messages":"125","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"84"},{"filePath":"126","messages":"127","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"128","messages":"129","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"130","usedDeprecatedRules":"84"},{"filePath":"131","messages":"132","errorCount":0,"warningCount":12,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"133","messages":"134","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"135","usedDeprecatedRules":"84"},{"filePath":"136","messages":"137","errorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"138","messages":"139","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"140","messages":"141","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"142","usedDeprecatedRules":"84"},{"filePath":"143","messages":"144","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"145","messages":"146","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"147","messages":"148","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"149","usedDeprecatedRules":"84"},{"filePath":"150","messages":"151","errorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"152","messages":"153","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"154","messages":"155","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"156","messages":"157","errorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"158","messages":"159","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"84"},{"filePath":"160","messages":"161","errorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"162","messages":"163","errorCount":0,"warningCount":6,"fixableErrorCount":0,"fixableWarningCount":0,"source":"164","usedDeprecatedRules":"84"},{"filePath":"165","messages":"166","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"84"},{"filePath":"167","messages":"168","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"84"},{"filePath":"169","messages":"170","errorCount":0,"warningCount":7,"fixableErrorCount":0,"fixableWarningCount":0,"source":"171","usedDeprecatedRules":"84"},{"filePath":"172","messages":"173","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"174","messages":"175","errorCount":0,"warningCount":11,"fixableErrorCount":0,"fixableWarningCount":0,"source":"176","usedDeprecatedRules":"84"},{"filePath":"177","messages":"178","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},"/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/index.js",[],["179","180"],"/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/theme.js",[],"/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/App.js",[],"/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/constants.js",[],"/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/services/auth-service.js",["181"],"import {fetchData} from '../helpers/helpers'\nimport Constants from '../constants'\n\nimport AadharDataService from './customer-data-service'\nimport PeakPwa from './peakpwa';\n\nclass AuthService {\n  constructor() {\n    this._isLoggedIn = localStorage.getItem('user_data') ? true : false;\n    if(this.isLoggedIn) {\n      let user_data = localStorage.getItem('user_data')\n      if (user_data) {\n        user_data = JSON.parse(user_data);\n        // this.user_data = user_data;\n        // return user_data;\n        Constants.token = user_data.token;\n      }\n    }\n  }\n\n  async auth(username, password) {\n    let headers = new Headers();\n    headers.set('Authorization', 'Basic ' + btoa(username + \":\" + password));\n    let user_data = await fetchData('POST', `${Constants.domain}/api/login/`, {}, headers);\n    Constants.token = user_data.token;\n    let state_list = await fetchData('GET', `${Constants.domain}/api/passes/state/?assigned_user=${user_data.id}&expand=template`);\n\n    if(state_list.results.length) {\n      var state_data = state_list.results[0];\n      return { user_data, state_data };\n    } else {\n      Constants.token = null;\n      throw {\n          response: {\n            detail: 'This account is not configured to be used with this app.'\n          }\n      }      \n    }\n  }\n\n  login(user_data, state_data) {\n    this._isLoggedIn = true;\n    localStorage.setItem('user_data', JSON.stringify(user_data));\n\tlocalStorage.setItem('state_data', JSON.stringify(state_data));\n\t\n\tPeakPwa.webapp.setStateData(state_data);\n    PeakPwa.subscribe();\n  }\n\n  logout() {\n\tAadharDataService.dropCache();\n\tPeakPwa.unsubscribe();\n\t// localStorage.clear();\n\tConstants.token = null\t;\n    this._isLoggedIn = false;\n  }\n\n  getUserData() {\n    if (this.user_data) {\n      return this.user_data;\n    } else {\n      let user_data = localStorage.getItem('user_data')\n      if (user_data) {\n        user_data = JSON.parse(user_data);\n        this.user_data = user_data;\n        return user_data;\n      }\n    }\n  }\n\n  getUserState() {\n    if (this.state_data) {\n      return this.state_data;\n    } else {\n      let state_data = localStorage.getItem('state_data')\n      if (state_data) {\n        state_data = JSON.parse(state_data);\n        this.state_data = state_data;\n        return state_data;\n      }\n    }\n  }\n\n  isLoggedIn() {\n    if (this._isLoggedIn) {\n      return true;\n    } else {\n      return false\n    }\n  }\n}\n\nexport default new AuthService()","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/Components/MenuAppBar.js",["182","183","184","185","186"],"import React from 'react';\nimport { makeStyles } from '@material-ui/core/styles';\nimport AppBar from '@material-ui/core/AppBar';\nimport Toolbar from '@material-ui/core/Toolbar';\nimport Typography from '@material-ui/core/Typography';\nimport IconButton from '@material-ui/core/IconButton';\nimport MenuIcon from '@material-ui/icons/Menu';\n// import ArrowBackIosIcon from '@material-ui/icons/ArrowBackIos';\nimport ArrowBackIcon from '@material-ui/icons/ArrowBack';\nimport AccountCircle from '@material-ui/icons/AccountCircle';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Popover from '@material-ui/core/Popover';\nimport ExitToAppIcon from '@material-ui/icons/ExitToApp';\nimport LockIcon from '@material-ui/icons/Lock';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\n\nimport AuthService from './../services/auth-service'\nimport { useHistory } from 'react-router';\n\nimport {useConfirmationDialog } from './ConfirmationDialogProvider'\n\nimport Constants from './../constants'\n\nconst useStyles = makeStyles((theme) => ({\n\n  root: {\n    flexGrow: 1,\n  },\n  backButton: {\n    marginRight: theme.spacing(2),\n  },\n  title: {\n    flexGrow: 1,\n  },\n}));\n\nexport default function MenuAppBar(props) {\n  const classes = useStyles();\n  const [anchorEl, setAnchorEl] = React.useState(null);\n  const [backBtn, showBackBtn] = React.useState(null);\n\n  let history = useHistory();\n\n  let auth = AuthService.isLoggedIn();\n  let user_state = AuthService.getUserState();\n\n  let { getConfirmation } = useConfirmationDialog()\n\n  const handleMenu = (event) => {\n    setAnchorEl(event.currentTarget);\n  };\n\n  React.useEffect(() => {\n    history.listen((location) => {\n      showBackBtn(!(location.pathname == '/'));\n    });\n  }, [])\n\n  return (\n    <div>\n      <AppBar position=\"fixed\">\n        <Toolbar>\n          {backBtn\n            ? <IconButton edge=\"start\" className={classes.backButton} color=\"inherit\" aria-label=\"back\" onClick={() => {history.goBack()}}>\n                <ArrowBackIcon />\n              </IconButton>\n            : <img src={process.env.PUBLIC_URL + '/Aadhar-White.svg'} className={classes.backButton} style={{height: '30px'}}/>\n          }\n          \n          <Typography variant=\"h6\" className={classes.title}>\n            Aadhaar Reporting App\n          </Typography>\n          {auth && (\n            <div>\n              <IconButton\n                aria-label=\"account of current user\"\n                aria-controls=\"menu-appbar\"\n                aria-haspopup=\"true\"\n                onClick={handleMenu}\n                color=\"inherit\">\n                <AccountCircle />\n              </IconButton>\n              <Popover\n                id=\"menu-appbar\"\n                anchorEl={anchorEl}\n                getContentAnchorEl={null}\n                anchorOrigin={{\n                  vertical: 'bottom',\n                  horizontal: 'right',\n                }}\n                keepMounted\n                transformOrigin={{\n                  vertical: 'top',\n                  horizontal: 'right',\n                }}\n                open={Boolean(anchorEl)}\n                // close={close}\n                onClose={() => {\n                  setAnchorEl(null)\n                }}>\n                <MenuItem disabled color=\"primary\">\n                  <ListItemIcon style={{minWidth:\"30px\"}} color=\"primary\">\n                    <AccountCircle fontSize=\"small\" />\n                  </ListItemIcon>\n                  <ListItemText color=\"primary\" primary={user_state.name} />\n                </MenuItem>\n                <MenuItem button onClick={()=> {history.push('/change_password/')}}>\n                  <ListItemIcon style={{minWidth:\"30px\"}}>\n                    <LockIcon fontSize=\"small\" />\n                  </ListItemIcon>\n                  <ListItemText color=\"primary\" primary=\"Change Password\" />\n                </MenuItem>\n                <MenuItem onClick={async ()=> {\n                  setAnchorEl(null);\n                  const confirmed = await getConfirmation({\n                    title: 'Logout', \n                    message: 'Are you sure you want to logout? Any pending upload data will be lost.',\n                    btnConfirmText: 'Logout'\n                  });\n                \n                  if(!confirmed) return;\n                  props.onLogout();\n                }}>\n                  <ListItemIcon style={{minWidth:\"30px\"}}>\n                    <ExitToAppIcon fontSize=\"small\" />\n                  </ListItemIcon>\n                  <ListItemText primary=\"Logout\" />\n                </MenuItem>\n              </Popover>\n            </div>\n          )}\n        </Toolbar>\n      </AppBar>\n    </div>\n  );\n}\n","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/Components/BottomNav.js",["187"],"/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/services/peakpwa.js",["188","189","190","191","192","193","194","195","196","197","198","199","200","201","202","203","204","205","206","207","208","209","210","211","212","213","214","215","216","217","218","219","220","221","222","223","224","225","226","227","228","229","230","231","232"],"import bowser from 'bowser'\n// import localforage from \"localforage\"\nimport {getQueryParam} from './../helpers/helpers'\nimport localforage from 'localforage'\n\nimport PeakConstants from './../constants'\n\nvar PeakPwa = function () {\n\t'use strict';\n\tvar location = window.location;\n\n\tvar LS_USER_SUBSCRIBED_STATUS = location.hostname + '-' + 'ls-subscribe-cache';\n\tvar LS_USER_PERM_STATUS = location.hostname + '-' + 'ls-perm-cache';\n\tvar LS_DENIED_NOTIF_PERMISSION = location.hostname + '-' + 'ls-denied-notif';\n\n\tvar PWA_SUPPORTED_BROWSERS = {\n\t\tdesktop: ['Chrome'],\n\t\tmobile: ['Samsung Internet for Android', 'Chrome', 'Firefox', 'Safari']\n\t}\n\tvar NOTIFICATIONS_SUPPORTED_BROWSERS = {\n\t\tdesktop: ['Chrome', 'Firefox', 'Safari', 'Opera'],\n\t\tmobile: ['Samsung Internet for Android', 'Chrome', 'Firefox', 'Safari', 'UC Browser', 'Opera']\n\t}\n\n\tvar NAMESPACE = \"peakpwa\";\n\n\tvar webapp = {\n\t\tinitialized: false,\n\t\tdomain: location.origin,\n\t\tapp: null,\n\t\tserialno: null,\n\t\ta2hsEvent: null,\n\t\tvapid: null,\n\t\tisSubscribed: false,\n\t\tsubscription: null,\n\t\tserviceWorkerRegistration: null,\n\t};\n\n\t/** Execute on start **/\n\twebapp.init = async function (constants, state) {\n\t\tconsole.log(constants)\n\t\tif(webapp.isInit) return;\n\n\t\tif(state) {\n\t\t\tconstants.serialno = state.template.serialno;\n\t\t\tconstants.state_data = state;\n\t\t}\n\t\t\n\n\t\twebapp.constants = constants;\n\n\t\t// Add constants to webapp\n\t\tfor (var k in constants) {\n\t\t\tif (constants.hasOwnProperty(k)) {\n\t\t\t\twebapp[k] = constants[k];\n\t\t\t}\n\t\t}\n\n\t\tawait webapp.registerServiceWorker();\n\n\t\tvar tracker_sn = webapp.getTrackerSerialno();\n\t\twebapp.installed = tracker_sn ? tracker_sn : false;\n\n\t\t// Check for src param if not subscribed yet\n\t\tif(!webapp.installed) {\n\t\t\tlet install_param = getQueryParam('src');\n\t\t\tif (install_param) localStorage.setItem('install_parameter', install_param);\n\t\t}\n\n\t\t// Cache tracker/constants for use by service worker\n\t\twebapp.idbCache.init();\n\t\twebapp.idbCache.set('trackerSerialno', tracker_sn);\n\t\twebapp.idbCache.set('peak_constants', constants);\n\n\t\twebapp.initListeners();\n\n\t\tif(!state) {\n\t\t\tdocument.dispatchEvent(new CustomEvent('PeakPwaInit', {}));\n\t\t\twebapp.isInit = true;\n\t\t\treturn;\n\t\t};\n\n\t\tlet isSubscribed = await webapp.getSubscriptionStatus();\n\t\tlet isAddedToHomescreen = webapp.isAddedToHomescreen();\n\t\tlet isPermGranted = webapp.getPermissionStatus() == 'granted';\n\n\t\t// Fix forms in chrome mobile PWAs\n\t\tif (isAddedToHomescreen && bowser.mobile && bowser.chrome) {\n\t\t\twebapp.fixFormsTarget();\n\t\t}\n\n\t\t// Save device token on Safari APNS\n\t\tif (webapp.is_safari_with_apns()) {\n\t\t\tvar permData = window.safari.pushNotification.permission(webapp.apns_push_id);\n\t\t\tif (permData.permission == 'granted')\n\t\t\t\twebapp.deviceToken = permData.deviceToken;\n\t\t}\n\n\t\tif (webapp.installed) {\n\t\t\twebapp.initialized = true;\n\t\t\tdocument.dispatchEvent(new CustomEvent('PeakPwaInit', {}));\n\t\t\twebapp.initGeolocationPerms();\n\t\t\twebapp.updateTokenIfChanged();\n\t\t}\n\n\t\tif (!webapp.installed) {\n\t\t\tif (isAddedToHomescreen || isPermGranted) {\n\t\t\t\tdocument.dispatchEvent(new CustomEvent('PeakPwaInstallStart', {}));\n\t\t\t\twebapp.subscribe(function () {\n\t\t\t\t\tif (isAddedToHomescreen) {\n\t\t\t\t\t\twebapp.logPwaFirstLaunchEvents();\n\t\t\t\t\t\tdocument.dispatchEvent(new CustomEvent('PwaFirstLaunch', {}));\n\t\t\t\t\t}\n\n\t\t\t\t\t// Clear html to update tags\n\t\t\t\t\tif (webapp.app != 'website') webapp.refreshHtmlCache();\n\n\t\t\t\t\twebapp.initialized = true;\n\t\t\t\t\twebapp.installed = true;\n\n\t\t\t\t\tdocument.dispatchEvent(new CustomEvent('PeakPwaInstallFinished', {}));\n\t\t\t\t\tdocument.dispatchEvent(new CustomEvent('PeakPwaInit', {}));\n\t\t\t\t});\n\t\t\t} else {\n\t\t\t\tdocument.dispatchEvent(new CustomEvent('PeakPwaInit', {}));\n\t\t\t}\n\t\t}\n\n\t\twebapp.logVisitEvents();\n\n\t\twebapp.isInit = true;\n\t}\n\n\twebapp.getSubscriptionStatus = function () {\n\t\tvar userSubStatus = localStorage.getItem(LS_USER_SUBSCRIBED_STATUS);\n\n\t\t// If a browser supports PushManager, use it to check subscription status\n\t\tif ('PushManager' in window) {\n\t\t\treturn webapp.serviceWorkerRegistration.pushManager.getSubscription()\n\t\t\t\t.then(function (subscription) {\n\t\t\t\t\twebapp.subscription = subscription;\n\t\t\t\t\twebapp.isSubscribed = !(subscription === null);\n\t\t\t\t\treturn webapp.isSubscribed;\n\t\t\t\t});\n\n\t\t\t// In other browsers like Safari iOS check localStorage only\n\t\t} else if ((bowser.mobile && bowser.safari) || webapp.is_safari_with_apns()) {\n\t\t\twebapp.isSubscribed = !(userSubStatus == 'subscribed');\n\t\t\treturn Promise.resolve(webapp.isSubscribed);\n\t\t}\n\t}\n\n\twebapp.initGeolocationPerms = function () {\n\t\tif ('permissions' in navigator) {\n\t\t\tnavigator.permissions.query({\n\t\t\t\t\tname: 'geolocation'\n\t\t\t\t})\n\t\t\t\t.then(function (permissionStatus) {\n\t\t\t\t\t// console.log('geolocation permission state is ', permissionStatus.state);\n\t\t\t\t\tif (permissionStatus.state == 'granted') {\n\t\t\t\t\t\tlocalStorage.setItem(`${NAMESPACE}_geo_enabled`, 'true')\n\t\t\t\t\t} else {\n\t\t\t\t\t\tlocalStorage.setItem(`${NAMESPACE}_geo_enabled`, 'false')\n\t\t\t\t\t}\n\t\t\t\t\tpermissionStatus.onchange = function () {\n\t\t\t\t\t\t// console.log('geolocation permission state has changed to ', this.state);\n\t\t\t\t\t};\n\n\t\t\t\t\tif (webapp.isGeoLocationEnabled()) webapp.updateLocIfNeeded();\n\t\t\t\t});\n\t\t} else {\n\t\t\tif (webapp.isGeoLocationEnabled()) webapp.updateLocIfNeeded();\n\t\t}\n\t}\n\n\twebapp.registerServiceWorker = async function () {\n\t\t// console.log('ServiceWorker Registered');\n\t\tif (PeakConstants.app == 'website') {\n\t\t\tvar sw_url = PeakConstants.serviceWorker_path ? PeakConstants.serviceWorker_path : `./PeakServiceWorker.js`;\n\t\t} else {\n\t\t\tsw_url = './service-worker.js'\n\t\t}\n\n\t\tif ('serviceWorker' in navigator) {\n\t\t\tlet swRegOptions = {}\n\t\t\tif (PeakConstants.serviceWorker_scope) {\n\t\t\t\tswRegOptions.scope = PeakConstants.serviceWorker_scope;\n\t\t\t}\n\t\t\tlet serviceWorkerRegistration = await navigator.serviceWorker.register(sw_url, swRegOptions)\n\t\t\twebapp.serviceWorkerRegistration = serviceWorkerRegistration;\n\t\t\tdocument.dispatchEvent(new CustomEvent('onServiceWorkerRegistered', {}));\n\t\t\treturn serviceWorkerRegistration;\n\t\t}\n\n\t\treturn Promise.reject();\n\t}\n\n\t// function showNotfEnablePopup() {\n\t// \tif (PeakPwa.webapp.getPermissionStatus() != 'default') return;\n\n\t// \tvar cache_key_ts = 'notif-enable-popup-shown';\n\n\t// \tfunction showPopup() {\n\t// \t\tnew PeakPwaUi.components.NotificationEnableComponent('pk-notif-popup').render().show();\n\t// \t\twebapp.idbCache.set(cache_key_ts, Date.now());\n\t// \t}\n\n\t// \tvar delta_pd = convertJsonDeltaToMs(webapp.constants.notif_popup_throttle ? webapp.constants.notif_popup_throttle : {\n\t// \t\t\"days\": 1\n\t// \t});\n\n\t// \tif (!delta_pd) {\n\t// \t\tshowPopup();\n\t// \t\treturn;\n\t// \t}\n\n\t// \t//Check throttle\n\t// \treturn webapp.idbCache.get(cache_key_ts).then(function (last_log) {\n\t// \t\tif (!last_log) return showPopup();\n\t// \t\tlast_log = new Date(last_log).getTime();\n\t// \t\tvar now = Date.now()\n\t// \t\tif ((now - last_log) > delta_pd) {\n\t// \t\t\tshowPopup();\n\t// \t\t}\n\t// \t});\n\t// }\n\n\twebapp.injectCss = async function (url, parent=document) {\n\t\tconst linkElem = document.createElement('link');\n\t\tlinkElem.setAttribute('rel', 'stylesheet');\n\t\tlinkElem.setAttribute('href', url);\n\t\tparent.appendChild(linkElem);\n\t}\n\n\twebapp.initListeners = function () {\n\t\tdocument.addEventListener('toggleSubscription', function (e) {\n\t\t\tif (webapp.serviceWorkerRegistration) {\n\t\t\t\tvar userSubStatus = localStorage.getItem(LS_USER_SUBSCRIBED_STATUS);\n\t\t\t\tif (userSubStatus == 'subscribed') {\n\t\t\t\t\twebapp.unsubscribe();\n\t\t\t\t} else {\n\t\t\t\t\twebapp.subscribe();\n\t\t\t\t}\n\t\t\t}\n\t\t}, false);\n\n\t\tif ('serviceWorker' in navigator) {\n\t\t\tnavigator.serviceWorker.addEventListener('message', (e) => {\n\t\t\t\twindow.postMessage('onUnreadIncremented', location.origin);\n\t\t\t});\n\t\t}\n\t}\n\n\twebapp.getSubscription = function (callback) {\n\t\tif (webapp.subscription) {\n\t\t\twebapp.isSubscribed = true;\n\t\t\treturn callback(webapp.subscription)\n\n\t\t} else if ('PushManager' in window) {\n\t\t\twebapp.serviceWorkerRegistration.pushManager.getSubscription()\n\t\t\t\t.then(function (subscription) {\n\t\t\t\t\twebapp.subscription = subscription;\n\t\t\t\t\twebapp.isSubscribed = !(subscription === null);\n\t\t\t\t\tcallback(subscription)\n\t\t\t\t});\n\n\t\t} else {\n\t\t\tcallback(null);\n\t\t}\n\t}\n\n\t/** Event utility  **/\n\n\twebapp.logVisitEvents = function () {\n\t\tif (!webapp.isOnline()) return;\n\n\t\tvar events_to_log = [];\n\n\t\tvar tracker_sn = webapp.getTrackerSerialno();\n\t\tif (tracker_sn) {\n\t\t\tevents_to_log.push('daily_visit_with_tracker');\n\t\t\tevents_to_log.push('visit_with_tracker');\n\n\t\t\tif (webapp.isAddedToHomescreen()) {\n\t\t\t\tevents_to_log.push('pwa_visit');\n\t\t\t\tevents_to_log.push('daily_pwa_visit');\n\t\t\t}\n\n\t\t} else if (!webapp.isPwaSupported() && !webapp.isNotificationSupported()) {\n\t\t\twebapp.logEvent('unsupported_browser', {\n\t\t\t\tbrowser_name: bowser.name,\n\t\t\t\tuser_agent: navigator.userAgent,\n\t\t\t\tdevice: `${bowser.osname} - ${bowser.osversion}`\n\t\t\t});\n\n\t\t} else {\n\t\t\tevents_to_log.push('visit_without_tracker');\n\t\t}\n\n\t\tif (events_to_log.length) webapp.logEvents(events_to_log);\n\t}\n\n\twebapp.logPwaFirstLaunchEvents = function () {\n\t\twebapp.logEvent(\"pwa_opened\");\n\t\tif (!bowser.chrome) webapp.logEvent(\"appinstalled\");\n\t}\n\n\t/** General Utility  **/\n\n\twebapp.isAddedToHomescreen = function () {\n\t\t//Check for undectable browsers\n\t\tvar undetectable_standalone_browsers = [\"samsung\", \"ucbrowser\"];\n\t\tvar webapp_start_url = '?homescreen=1'; // ?homescreen=1\n\t\tfor (var i = 0; i < undetectable_standalone_browsers.length; i++) {\n\t\t\tvar browser = undetectable_standalone_browsers[i].toLowerCase();\n\t\t\tif (window.navigator.userAgent.toLowerCase().indexOf(browser) > 0 && window.location.href.indexOf(webapp_start_url) > 0) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn window.matchMedia('(display-mode: standalone)').matches;\n\t}\n\n\twebapp.isLoadedInFrame = function () {\n\t\ttry {\n\t\t\treturn window.self !== window.top;\n\t\t} catch (e) {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\twebapp.urlB64ToUint8Array = function (base64String) {\n\t\tconst padding = '='.repeat((4 - base64String.length % 4) % 4);\n\t\tconst base64 = (base64String + padding)\n\t\t\t.replace(/\\-/g, '+')\n\t\t\t.replace(/_/g, '/');\n\n\t\tconst rawData = window.atob(base64);\n\t\tconst outputArray = new Uint8Array(rawData.length);\n\n\t\tfor (var i = 0; i < rawData.length; ++i) {\n\t\t\toutputArray[i] = rawData.charCodeAt(i);\n\t\t}\n\t\treturn outputArray;\n\t}\n\n\twebapp.isMobile = function () {\n\t\treturn navigator.userAgent.match(/(iPhone|iPod|iPad|Android|BlackBerry|IEMobile|SamsungBrowser|UCBrowser)/);\n\t}\n\n\twebapp.isPwaSupported = function () {\n\t\tvar browser_list = PWA_SUPPORTED_BROWSERS[bowser.mobile ? 'mobile' : 'desktop'];\n\n\t\t// Exception for chrome as it supports only after v66\n\t\tif (bowser.name == 'Chrome' && parseInt(bowser.version) < 66) return false;\n\n\t\t// On iOS, only allow Safari\n\t\tif (bowser.ios && !bowser.safari) return false;\n\n\t\treturn (browser_list.indexOf(bowser.name) >= 0) ? true : false;\n\t}\n\n\twebapp.isNotificationSupported = function () {\n\t\tvar browser_list = NOTIFICATIONS_SUPPORTED_BROWSERS[bowser.mobile ? 'mobile' : 'desktop'];\n\n\t\t// On iOS, reject all browsers\n\t\tif (bowser.ios && !bowser.safari) return false;\n\n\t\treturn (browser_list.indexOf(bowser.name) >= 0) ? true : false;\n\t}\n\n\twebapp.getUiMode = function (self = this) {\n\n\t\t// Set mode\n\t\tvar mode = '',\n\t\t\tisSubscribed = PeakPwa.isSubscribed(),\n\t\t\tpermStatus = PeakPwa.getPermissionStatus(),\n\t\t\taddedToHome = PeakPwa.isAddedToHomescreen();\n\n\t\tswitch (true) {\n\t\t\tcase ( //(!isSubscribed && permStatus !== 'granted' && !addedToHome) ||\n\t\t\t\t(!PeakPwa.webapp.getTrackerSerialno())):\n\t\t\t\tmode = 'disabled'\n\t\t\t\tbreak;\n\t\t\tcase ((isSubscribed && permStatus === 'granted')):\n\t\t\t\tmode = 'enabled'\n\t\t\t\tbreak;\n\t\t\tdefault:\n\t\t\t\tmode = 'pull';\n\t\t}\n\t\treturn mode;\n\t}\n\n\twebapp.loadJS = function (url, implementationCode, location) {\n\t\tif (!location) location = document.body;\n\t\tvar scriptTag = document.createElement('script');\n\t\tscriptTag.src = url;\n\t\tif (implementationCode) {\n\t\t\tscriptTag.onload = implementationCode;\n\t\t\tscriptTag.onreadystatechange = implementationCode;\n\t\t}\n\t\tlocation.appendChild(scriptTag);\n\t}\n\n\twebapp.uuidv4 = function () {\n\t\treturn 'xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx'.replace(/[xy]/g, function (c) {\n\t\t\tvar r = Math.random() * 16 | 0,\n\t\t\t\tv = c == 'x' ? r : (r & 0x3 | 0x8);\n\t\t\treturn v.toString(16);\n\t\t});\n\t}\n\n\twebapp.isOnline = function () {\n\t\treturn navigator.onLine;\n\t}\n\n\twebapp.checkThrottle = function (delta, cache_key_ts) {\n\t\tvar delta_pd = convertJsonDeltaToMs(delta);\n\t\treturn webapp.idbCache.get(cache_key_ts)\n\t\t\t.then(function (last_log) {\n\t\t\t\tif (!last_log) return true;\n\t\t\t\tlast_log = new Date(last_log).getTime();\n\t\t\t\tvar now = Date.now()\n\t\t\t\tif ((now - last_log) > delta_pd) {\n\t\t\t\t\treturn true;\n\t\t\t\t} else {\n\t\t\t\t\treturn false;\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\tfunction convertJsonDeltaToMs(delta) {\n\t\tvar delta_s = 0;\n\t\tif (delta.days) delta_s += delta.days * 86400;\n\t\tif (delta.hours) delta_s += delta.hours * 3600;\n\t\tif (delta.minutes) delta_s += delta.minutes * 60;\n\t\tif (delta.seconds) delta_s += delta.seconds;\n\t\treturn delta_s * 1000;\n\t}\n\n\twebapp.fixFormsTarget = function () {\n\t\t// This is meant to fix a but with form POSTs with target=\"_blank\"\n\t\tvar forms = document.querySelectorAll('form[target=\"_blank\"]');\n\t\tfor (var i = 0; i < forms.length; i++) {\n\t\t\tforms[i].removeAttribute(\"target\");\n\t\t}\n\t}\n\n\twebapp.isUiAllowedOnPage = function () {\n\t\treturn (!PeakConstants.allowed_paths || !PeakConstants.allowed_paths.length ||\n\t\t\t\tPeakConstants.allowed_paths.indexOf(window.location.pathname) >= 0) &&\n\t\t\t(PeakConstants.app == 'website')\n\t}\n\n\n\t/** Notification API **/\n\n\twebapp.getNotificationsUrl = async function (trackerSerialno, id = null) {\n\t\tvar url = `${webapp.domain}/api/communication/notification/`;\n\t\tif (id) url += `${id}/`;\n\t\turl += `?bypass_sw=true&tracker__serialno=${trackerSerialno}&order_by=-createdAt&localize=true`;\n\n\t\treturn url;\n\t}\n\n\twebapp.getNotifications = async function (noCache = false) {\n\t\tvar serialno = webapp.getTrackerSerialno();\n\t\tlet cached_notifs = await webapp.idbCache.getNotifications()\n\t\tif (!noCache && cached_notifs) return cached_notifs;\n\t\tlet url = await webapp.getNotificationsUrl(serialno);\n\t\tlet response = await fetch(url, {\n\t\t\tcache: \"no-cache\"\n\t\t})\n\n\t\tif (response.status < 300) {\n\t\t\twebapp.logEvent(\"fetch_notifications\");\n\t\t\tvar data = await response.json()\n\t\t\tvar formatted_notifs = webapp.formatNotificationsList(data)\n\t\t\twebapp.idbCache.cacheNotifications(formatted_notifs);\n\t\t\treturn formatted_notifs;\n\t\t}\n\t}\n\n\twebapp.deleteNotification = async function (id) {\n\t\twebapp.logEvent(\"delete_notification\");\n\t\tvar serialno = webapp.getTrackerSerialno();\n\t\tlet url = await webapp.getNotificationsUrl(serialno, id)\n\t\treturn fetch(url, {\n\t\t\tmethod: \"DELETE\",\n\t\t\theaders: {\n\t\t\t\t'Accept': 'application/json',\n\t\t\t\t'Content-Type': 'application/json'\n\t\t\t}\n\t\t})\n\t}\n\n\twebapp.formatNotificationsList = function (data) {\n\t\tvar formatted_notifs = [];\n\t\tfor (var i = 0; i < data.results.length; i++) {\n\t\t\tvar notif = {\n\t\t\t\tid: data.results[i].id,\n\t\t\t\tchangeTitle: data.results[i].shared_notification.notification_title,\n\t\t\t\tchangeMessage: data.results[i].shared_notification.notification_message,\n\t\t\t\tcreatedAt: data.results[i].createdAt\n\t\t\t}\n\t\t\tif (data.results[i].shared_notification.metadata) {\n\t\t\t\tfor (var key in data.results[i].shared_notification.metadata) {\n\t\t\t\t\tif (data.results[i].shared_notification.metadata.hasOwnProperty(key)) {\n\t\t\t\t\t\tnotif[key] = data.results[i].shared_notification.metadata[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (data.results[i].metadata) {\n\t\t\t\tfor (var key in data.results[i].metadata) {\n\t\t\t\t\tif (data.results[i].metadata.hasOwnProperty(key)) {\n\t\t\t\t\t\tnotif[key] = data.results[i].metadata[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\tformatted_notifs.push(notif);\n\t\t}\n\t\t// console.log(formatted_notifs);\n\t\treturn formatted_notifs;\n\t}\n\n\n\t/** State/Tracker API **/\n\n\twebapp.getInstallToken = function () {\n\t\tif (webapp.constants.install_token) return webapp.constants.install_token;\n\t\tif (webapp.is_safari_with_apns()) {\n\t\t\tvar permData = window.safari.pushNotification.permission(webapp.apns_push_id)\n\t\t\treturn permData.deviceToken;\n\t\t}\n\n\t\tlet key = `${NAMESPACE}_installToken_${webapp.constants.state_data.id}`;\n\t\tvar installToken = localStorage.getItem(key);\n\t\tif (!installToken) {\n\t\t\tinstallToken = webapp.uuidv4();\n\t\t\tlocalStorage.setItem(key, installToken);\n\t\t}\n\t\treturn installToken;\n\t}\n\n\twebapp.getTrackerSerialno = function () {\n\t\tif (webapp.constants.tracker_serialno) return webapp.constants.tracker_serialno;\n\t\tlet key = `${NAMESPACE}_trackerSerialno_${webapp.constants?.state_data?.id}`;\n\t\tvar serialno = localStorage.getItem(key);\n\t\treturn serialno;\n\t}\n\n\twebapp.getDeviceLibraryId = function() {\n\t\treturn webapp.idbCache.get('deviceLibraryId')\n\t}\n\n\twebapp.setStateData = function(state)  {\n\t\twebapp.serialno = state.template.serialno;\n\t\twebapp.constants.serialno = state.template.serialno;\n\t\twebapp.constants.state_data = state;\n\t\tlocalStorage.setItem(`${NAMESPACE}_stateSerialno`, state.serialno);\n\t\tlocalStorage.setItem(`${NAMESPACE}_stateId`, state.id);\n\t\tlocalStorage.setItem(`${NAMESPACE}_stateEncodedId`, state.encoded_id);\n\t}\n\n\twebapp.getStateSerialno = function () {\n\t\tif (webapp.constants.state_serialno) return webapp.constants.state_serialno;\n\t\tvar serialno = localStorage.getItem(`${NAMESPACE}_stateSerialno`);\n\t\treturn serialno;\n\t}\n\n\twebapp.getTemplateId = function () {\n\t\tif (webapp.constants.template_id) return webapp.constants.template_id;\n\t\treturn localStorage.getItem(`${NAMESPACE}_templateId`);\n\t}\n\n\twebapp.getStateUrl = function (trackerSerialno, id = null) {\n\t\tvar url = `${webapp.domain}/api/passes/state/`;\n\t\tif (id) url += `${id}/`;\n\t\t// url += `?tracker__serialno=${trackerSerialno}`;\n\t\treturn url;\n\t}\n\n\twebapp.getState = function (reload=false) {\n\t\tvar cache_key = `state_data`;\n\n\t\tfunction fetchState() {\n\t\t\treturn fetch(webapp.getStateUrl('', webapp.getStateId()), {\n\t\t\t\tmethod: \"PUT\",\n\t\t\t\theaders: {\n\t\t\t\t\t'content-type': 'application/json'\n\t\t\t\t},\n\t\t\t\tbody: JSON.stringify({\n\t\t\t\t\tserialno: webapp.getStateSerialno()\n\t\t\t\t})\n\t\t\t}).then(function (response) {\n\t\t\t\tif (response.status < 300) return response.json()\n\t\t\t}).then(function (data) {\n\t\t\t\twebapp.idbCache.set(cache_key, data);\n\t\t\t\treturn data;\n\t\t\t});\n\t\t}\n\n\t\tif(reload) return fetchState();\n\n\t\treturn webapp.idbCache.get(cache_key)\n\t\t\t.then((cached_state) => {\n\t\t\t\tif (cached_state) return cached_state;\n\t\t\t\treturn fetchState();\n\t\t\t});\n\t}\n\n\twebapp.updateState = function (state_payload) {\n\t\tvar cache_key = `state_data`;\n\t\treturn fetch(PeakPwa.webapp.getStateUrl('', PeakPwa.webapp.getStateId()), {\n\t\t\tmethod: \"PUT\",\n\t\t\theaders: {\n\t\t\t\t'content-type': 'application/json'\n\t\t\t},\n\t\t\tbody: JSON.stringify(state_payload)\n\t\t}).then(function (response) {\n\t\t\tif (response.status < 300) {\n\t\t\t\tresponse.json().then(function (data) {\n\t\t\t\t\tPeakPwa.idbCache.set(cache_key, data);\n\t\t\t\t\treturn data;\n\t\t\t\t});\n\t\t\t}\n\t\t})\n\t}\n\n\twebapp.getStateId = function () {\n\t\tif (webapp.constants.state_id) return webapp.constants.state_id;\n\t\treturn localStorage.getItem(`${NAMESPACE}_stateId`);\n\t}\n\t\n\twebapp.getStateEncodedId = function () {\n\t\tif (webapp.constants.state_id) return webapp.constants.state_id;\n\t\treturn localStorage.getItem(`${NAMESPACE}_stateEncodedId`);\n\t}\n\n\n\t/** Preference Definitions API **/\n\n\twebapp.getPreferencesUrl = function () {\n\t\tvar url = `${webapp.domain}/api/communication/preferencedefinition/?serialno=${webapp.serialno}&order_by=display_position&display=true&content_type__name=checkbox`;\n\t\treturn url;\n\t}\n\n\twebapp.getPreferenceDefinitions = function () {\n\t\tvar cache_key = 'preference_defs',\n\t\t\tcache_key_ts = 'preference_defs_ts';\n\n\t\tfunction fetchPreferences() {\n\t\t\treturn fetch(webapp.getPreferencesUrl(), {\n\t\t\t\tmethod: \"GET\",\n\t\t\t\theaders: {\n\t\t\t\t\t'content-type': 'application/json'\n\t\t\t\t}\n\t\t\t}).then(function (response) {\n\t\t\t\tif (response.status < 300) {\n\t\t\t\t\treturn response.json()\n\t\t\t\t}\n\t\t\t}).then(function (data) {\n\t\t\t\twebapp.idbCache.set(cache_key, data);\n\t\t\t\twebapp.idbCache.set(cache_key_ts, Date.now());\n\t\t\t\treturn data;\n\t\t\t});\n\t\t}\n\n\t\treturn webapp.idbCache.get(cache_key).then((cached_data) => {\n\t\t\tif (!cached_data) return fetchPreferences();\n\n\t\t\t// Check for throttle\n\t\t\tvar delta_pd = webapp.constants.preference_defs_throttle ? convertJsonDeltaToMs(webapp.constants.preference_defs_throttle) : false;\n\t\t\tif (!delta_pd) {\n\t\t\t\treturn cached_data ? cached_data : fetchPreferences()\n\t\t\t}\n\n\t\t\tif (delta_pd) {\n\t\t\t\treturn webapp.idbCache.get(cache_key_ts).then(function (last_log) {\n\t\t\t\t\tif (!last_log) return fetchPreferences();\n\t\t\t\t\tlast_log = new Date(last_log).getTime();\n\t\t\t\t\tvar now = Date.now()\n\t\t\t\t\tif ((now - last_log) > delta_pd) {\n\t\t\t\t\t\treturn fetchPreferences();\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn cached_data;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n\n\n\t/** LoyaltyActions/Data/Config **/\n\n\twebapp.getLoyaltyData = function (no_cache) {\n\t\tvar cache_key = 'ldata';\n\n\t\tfunction fetchLoyaltyData() {\n\t\t\treturn fetch(webapp.getLoyaltyDataUrl(), {\n\t\t\t\tmethod: \"GET\",\n\t\t\t\theaders: {\n\t\t\t\t\t'content-type': 'application/json'\n\t\t\t\t}\n\t\t\t}).then(function (response) {\n\t\t\t\tif (response.status < 300) {\n\t\t\t\t\treturn response.json()\n\t\t\t\t}\n\t\t\t}).then(function (data) {\n\t\t\t\twebapp.idbCache.set(cache_key, data.results[0]);\n\t\t\t\treturn data.results[0];\n\t\t\t});\n\t\t}\n\n\t\treturn webapp.idbCache.get(cache_key)\n\t\t\t.then((cached_data) => {\n\t\t\t\tconsole.log(cached_data);\n\t\t\t\tif (!cached_data || no_cache) return fetchLoyaltyData();\n\t\t\t\treturn cached_data;\n\t\t\t})\n\t\t\t.catch((err) => {\n\t\t\t\tconsole.log(err);\n\t\t\t});\n\t}\n\n\twebapp.getLoyaltyDataUrl = function () {\n\t\tvar url = `${webapp.domain}/api/loyalty/loyaltydata/?serialno=${webapp.getStateSerialno()}`;\n\t\treturn url;\n\t}\n\n\twebapp.getLoyaltyActions = function (no_cache) {\n\t\tvar cache_key = 'loyalty_actions';\n\n\t\tfunction fetchActions() {\n\t\t\treturn fetch(webapp.getLoyaltyActionsUrl(), {\n\t\t\t\tmethod: \"GET\",\n\t\t\t\theaders: {\n\t\t\t\t\t'content-type': 'application/json'\n\t\t\t\t}\n\t\t\t}).then(function (response) {\n\t\t\t\tif (response.status < 300) {\n\t\t\t\t\treturn response.json()\n\t\t\t\t}\n\t\t\t}).then(function (data) {\n\t\t\t\twebapp.idbCache.set(cache_key, data.results);\n\t\t\t\treturn data.results;\n\t\t\t});\n\t\t}\n\n\t\treturn webapp.idbCache.get(cache_key).then((cached_data) => {\n\t\t\tif (!cached_data || no_cache) return fetchActions();\n\t\t\treturn cached_data;\n\t\t});\n\t}\n\n\twebapp.getLoyaltyActionsUrl = function () {\n\t\tvar url = `${webapp.domain}/api/loyalty/loyaltyaction/?serialno=${webapp.getStateSerialno()}`;\n\t\treturn url;\n\t}\n\n\n\t/** PkPass Handling **/\n\n\twebapp.createAndGetWalletCardUrl = async function (state_sn = null, callback = null) {\n\t\tlet wallet_url = (state_id, state_sn, template_sn) => `${webapp.constants.domain}/p/${template_sn}/state/${state_id}/${state_sn}/download/`;\n\t\tif (!state_sn) state_sn = webapp.getStateSerialno();\n\t\tif (!state_sn) {\n\t\t\tlet state = await webapp.createStateForPass();\n\t\t\tstate_sn = state.serialno\n\t\t}\n\n\t\tlet state_id = webapp.getStateEncodedId();\n\t\tlet pass_url = wallet_url(state_id, state_sn, webapp.constants.serialno)\n\t\tif (callback) callback(pass_url);\n\t\treturn pass_url\n\t}\n\n\twebapp.createStateForPass = async function() {\n\t\tlet response = await fetch(`${webapp.domain}/api/passes/state-action/create_temp_state/`, {\n\t\t\tmethod: \"POST\",\n\t\t\theaders: {\n\t\t\t\t'Accept': 'application/json',\n\t\t\t\t'Content-Type': 'application/json'\n\t\t\t},\n\t\t\tbody: JSON.stringify({\n\t\t\t\ttemplate_serialno: webapp.constants.serialno\n\t\t\t})\n\t\t});\n\n\t\tlet json = {}\n\t\tjson = await response.json();\n\n\t\twebapp.setStateData(json.state);\n\t\treturn json.state\n\t}\n\n\twebapp.isPkPassAdded = async function () {\n\t\tlet state_sn = webapp.getStateSerialno()\n\t\tif (!state_sn) {\n\t\t\treturn Promise.resolve(false);\n\t\t}\n\n\t\tlet response = await fetch(`${webapp.domain}/api/passes/state-action/is_pkpass_added/`, {\n\t\t\tmethod: \"POST\",\n\t\t\theaders: {\n\t\t\t\t'Accept': 'application/json',\n\t\t\t\t'Content-Type': 'application/json'\n\t\t\t},\n\t\t\tbody: JSON.stringify({\n\t\t\t\tstate_serialno: state_sn\n\t\t\t})\n\t\t})\n\t\t\n\t\tlet json = await response.json();\n\t\t\n\t\tif(json.tracker && !webapp.getTrackerSerialno()) {\n\t\t\tlocalStorage.setItem(`${NAMESPACE}_trackerSerialno`, json.tracker.serialno);\n\t\t\twebapp.idbCache.set('trackerSerialno', json.tracker.serialno);\n\t\t\twebapp.idbCache.set('deviceLibraryId', json.tracker.devicelibraryid);\n\t\t\twebapp.logVisitEvents();\n\t\t}\n\n\t\treturn json.is_pkpass_added\n\t}\n\n\n\t/** Push un/subscription **/\n\n\twebapp.getSubscriptionUrl = function (id = null) {\n\t\tif (webapp.is_safari_with_apns()) {\n\t\t\tvar url = `${webapp.domain}/p/${webapp.serialno}/app/${webapp.app}/${webapp.deviceToken}/${webapp.deviceToken}/`;\n\t\t} else {\n\t\t\tvar installToken = webapp.getInstallToken();\n\t\t\turl = `${webapp.domain}/p/${webapp.serialno}/app/${webapp.app}/${installToken}/${installToken}/`;\n\t\t}\n\t\tif (id) url += `${id}/`\n\t\treturn url;\n\t}\n\n\twebapp.reportSubscriptionChange = function () {\n\t\tvar userSubStatus = localStorage.getItem(LS_USER_SUBSCRIBED_STATUS);\n\t\tvar event = new CustomEvent('onSubscriptionChange', {\n\t\t\tdetail: {\n\t\t\t\tisSubscribed: (userSubStatus == 'subscribed')\n\t\t\t}\n\t\t});\n\t\tdocument.dispatchEvent(event);\n\t}\n\n\twebapp.reportSubscriptionChangeStart = function () {\n\t\tvar userSubStatus = localStorage.getItem(LS_USER_SUBSCRIBED_STATUS);\n\t\tvar event = new CustomEvent('onSubscriptionChangeStart', {});\n\t\tdocument.dispatchEvent(event);\n\t}\n\n\twebapp.is_safari_with_apns = function () {\n\t\treturn 'safari' in window && 'pushNotification' in window.safari;\n\t}\n\n\twebapp.requestNotificationPermission = function () {\n\t\treturn new Promise(function (resolve, reject) {\n\n\t\t\tif (webapp.is_safari_with_apns()) {\n\n\t\t\t\t// Check if perm has already been given\n\t\t\t\tlet perm_data = window.safari.pushNotification.permission(PeakPwa.webapp.apns_push_id);\n\n\t\t\t\tif (perm_data.permission == 'granted') {\n\t\t\t\t\twebapp.deviceToken = perm_data.deviceToken;\n\t\t\t\t\tresolve(perm_data.permission);\n\t\t\t\t}\n\n\t\t\t\tvar webPushUrl = `${webapp.domain}/p/${webapp.serialno}/app/${webapp.app}`;\n\t\t\t\tvar webPushId = webapp.apns_push_id;\n\t\t\t\tvar payload = {\n\t\t\t\t\t\"web_service_url\": webPushUrl,\n\t\t\t\t\t\"serialno\": webapp.serialno,\n\t\t\t\t\t\"destination\": document.location.href\n\t\t\t\t};\n\t\t\t\t// console.log(payload);\n\n\t\t\t\twindow.safari.pushNotification.requestPermission(\n\t\t\t\t\twebPushUrl,\n\t\t\t\t\twebPushId,\n\t\t\t\t\tpayload,\n\t\t\t\t\t(resultData) => {\n\t\t\t\t\t\tresolve(resultData.permission);\n\t\t\t\t\t\tif (resultData.permission == 'granted') {\n\t\t\t\t\t\t\twebapp.deviceToken = resultData.deviceToken;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t);\n\n\t\t\t} else {\n\t\t\t\t// const permissionResult = Notification.requestPermission(function (result) {\n\t\t\t\t// \tresolve(result);\n\t\t\t\t// });\n\t\t\t\t// if (permissionResult) {\n\t\t\t\t// \tpermissionResult.then(resolve, reject);\n\t\t\t\t// }\n\n\t\t\t\tNotification.requestPermission().then(resolve, reject);\n\t\t\t}\n\t\t});\n\t}\n\n\twebapp.getSafariPushPayload = function () {\n\t\tlet webPushUrl = `${webapp.domain}/p/${webapp.serialno}/app/${webapp.app}`;\n\t\tlet webPushId = webapp.apns_push_id;\n\t\tlet payload = {\n\t\t\t\"web_service_url\": webPushUrl,\n\t\t\t\"serialno\": webapp.serialno,\n\t\t\t\"destination\": document.location.href\n\t\t};\n\t\treturn payload;\n\t}\n\n\twebapp.getPermissionStatus = function () {\n\t\tif ('Notification' in window) {\n\t\t\tif (bowser.safari && typeof safari != 'undefined') {\n\t\t\t\treturn window.safari.pushNotification.permission(PeakPwa.webapp.apns_push_id).permission;\n\t\t\t}\n\t\t\treturn Notification.permission;\n\t\t} else {\n\t\t\treturn 'unavailable';\n\t\t}\n\t}\n\n\twebapp.requestNotificationPermissionAndSubscribe = function (callback) {\n\n\t\treturn webapp.requestNotificationPermission()\n\t\t\t.then(function (permissionResult) {\n\t\t\t\tif (permissionResult === 'ignore') {\n\t\t\t\t\t// console.log('Permission ignored... bypass');\n\n\t\t\t\t} else if (permissionResult !== 'granted') {\n\t\t\t\t\tvar previouslyDenied = localStorage.getItem(LS_DENIED_NOTIF_PERMISSION) || false;\n\t\t\t\t\tif (!previouslyDenied) {\n\t\t\t\t\t\twebapp.logEvent(\"perm_notif_denied\");\n\t\t\t\t\t}\n\t\t\t\t\tlocalStorage.setItem(LS_DENIED_NOTIF_PERMISSION, true);\n\t\t\t\t\twebapp.reportSubscriptionChange();\n\n\t\t\t\t} else {\n\t\t\t\t\twebapp.logEvent(\"perm_notif_granted\");\n\t\t\t\t\tlocalStorage.setItem(LS_DENIED_NOTIF_PERMISSION, false);\n\t\t\t\t\twebapp.reportSubscriptionChangeStart();\n\t\t\t\t\twebapp.handlePermissionGranted(callback);\n\t\t\t\t}\n\t\t\t\treturn permissionResult;\n\t\t\t})\n\t\t\t.catch(function (err) {\n\t\t\t\tconsole.log(err);\n\t\t\t});\n\t}\n\n\twebapp.handlePermissionGranted = async function (callback) {\n\t\tif (!webapp.is_safari_with_apns()) {\n\t\t\tlet subscription = await webapp.serviceWorkerRegistration.pushManager.getSubscription()\n\t\t\t// If subscription exists, just register with backend\n\t\t\t// Else get subscription, and register with backend.\n\t\t\twebapp.isSubscribed = !(subscription === null);\n\t\t\tif (webapp.isSubscribed) {\n\t\t\t\tlocalStorage.setItem(LS_USER_SUBSCRIBED_STATUS, 'subscribed');\n\t\t\t\twebapp.subscription = subscription;\n\t\t\t\twebapp.isSubscribed = true;\n\t\t\t\twebapp.subscribeWithBackend(callback);\n\n\t\t\t} else {\n\t\t\t\tconst applicationServerKey = webapp.urlB64ToUint8Array(webapp.vapid);\n\t\t\t\tsubscription = await webapp.serviceWorkerRegistration.pushManager.subscribe({\n\t\t\t\t\tuserVisibleOnly: true,\n\t\t\t\t\tapplicationServerKey: applicationServerKey\n\t\t\t\t});\n\n\t\t\t\tif (subscription) {\n\t\t\t\t\tlocalStorage.setItem(LS_USER_SUBSCRIBED_STATUS, 'subscribed');\n\t\t\t\t\twebapp.subscription = subscription;\n\t\t\t\t\twebapp.isSubscribed = true;\n\t\t\t\t\tawait webapp.subscribeWithBackend(callback);\n\t\t\t\t}\n\t\t\t}\n\n\t\t} else {\n\t\t\tlocalStorage.setItem(LS_USER_SUBSCRIBED_STATUS, 'subscribed');\n\t\t\tvar permData = window.safari.pushNotification.permission(webapp.apns_push_id)\n\t\t\twebapp.subscription = permData.deviceToken;\n\t\t\twebapp.isSubscribed = true;\n\t\t\tawait webapp.subscribeWithBackend(callback);\n\t\t}\n\t}\n\n\twebapp.subscribeWithBackend = async function (callback) {\n\t\t// console.log('subscribeWithBackend');\n\n\t\tvar sub_payload = {\n\t\t\t\"device_type\": window.navigator.platform,\n\t\t\t\"certificate_for\": null,\n\t\t};\n\n\t\tif (webapp.state_xid) {\n\t\t\tsub_payload.xid = webapp.state_xid;\n\t\t}\n\n\t\tif (webapp.is_safari_with_apns()) {\n\t\t\tsub_payload.push_token = webapp.subscription ? webapp.subscription : JSON.stringify({});\n\t\t\tsub_payload.pass_type_id = PeakConstants.apns_push_id;\n\t\t} else {\n\t\t\tsub_payload.push_token = webapp.subscription ? JSON.stringify(webapp.subscription) : JSON.stringify({});\n\t\t}\n\n\t\tlet state_data = localStorage.getItem('state_data')\n\t\tif(state_data) {\n\t\t\tstate_data = JSON.parse(state_data);\n\t\t\tsub_payload.xid = state_data.xid;\n\t\t}\n\n\t\t// Set install param if passed\n\t\tlet install_param = localStorage.getItem('install_parameter');\n\t\tif(install_param) sub_payload.install_parameter = install_param;\n\n\t\tlet response = await fetch(webapp.getSubscriptionUrl(), {\n\t\t\tmethod: \"POST\",\n\t\t\tbody: JSON.stringify(sub_payload),\n\t\t\theaders: {\n\t\t\t\t'Accept': 'application/json',\n\t\t\t\t'Content-Type': 'application/json'\n\t\t\t}\n\t\t})\n\n\t\tvar json = {}\n\t\ttry {\n\t\t\tjson = await response.json();\n\t\t} catch (e) {}\n\n\t\tvar isNewSub = webapp.getTrackerSerialno() ? false : true;\n\n\t\tlocalStorage.setItem(`${NAMESPACE}_trackerSerialno_${json.state.id}`, json.tracker.serialno);\n\t\tlocalStorage.setItem(`${NAMESPACE}_stateSerialno`, json.state.serialno);\n\t\tlocalStorage.setItem(`${NAMESPACE}_stateId`, json.state.id);\n\t\tlocalStorage.setItem(`${NAMESPACE}_stateEncodedId`, json.state.encoded_id);\n\t\tif(json.template) {\n\t\t\tlocalStorage.setItem(`${NAMESPACE}_templateId`, json.template.id);\n\t\t}\n\t\twebapp.idbCache.set('pushToken', sub_payload.push_token);\n\t\twebapp.idbCache.set('trackerSerialno', json.tracker.serialno);\n\n\t\twebapp.logVisitEvents();\n\t\tif (sub_payload.push_token != '{}') {\n\t\t\twebapp.logEvent(\"reg_with_pushtoken\");\n\t\t}\n\n\t\tif (isNewSub) document.dispatchEvent(new CustomEvent('PeakPwaInitalSubscription', {}));\n\t\tif (callback) callback();\n\t\t\n\t\twebapp.reportSubscriptionChange();\n\t}\n\n\twebapp.unsubscribeWithBackend = function () {\n\t\t// console.log('unsubscribeWithBackend');\n\t\tfetch(webapp.getSubscriptionUrl(), {\n\t\t\tmethod: \"DELETE\",\n\t\t\theaders: {\n\t\t\t\t'Accept': 'application/json',\n\t\t\t\t'Content-Type': 'application/json'\n\t\t\t}\n\t\t}).then((response) => {\n\t\t\twebapp.reportSubscriptionChange();\n\t\t});\n\t}\n\n\twebapp.subscribe = async function (callback) {\n\t\tif (!webapp.serviceWorkerRegistration) return;\n\n\t\twebapp.reportSubscriptionChangeStart();\n\n\t\t// Auto subscribe on chrome if permission has already been given\n\t\tif ('Notification' in window && webapp.subscription == null && Notification.permission == 'granted') {\n\t\t\tawait webapp.handlePermissionGranted(callback);\n\n\t\t\t// Handle Safari subscription\n\t\t} else if (webapp.is_safari_with_apns()) {\n\t\t\tvar permData = window.safari.pushNotification.permission(webapp.apns_push_id);\n\t\t\tif (!permData.deviceToken) return;\n\t\t\twebapp.subscription = permData.deviceToken;\n\t\t\tlocalStorage.setItem(LS_USER_SUBSCRIBED_STATUS, 'subscribed');\n\t\t\tawait webapp.subscribeWithBackend(callback);\n\n\t\t} else if (bowser.mobile && bowser.safari) {\n\t\t\tlocalStorage.setItem(LS_USER_SUBSCRIBED_STATUS, 'subscribed');\n\t\t\tawait webapp.subscribeWithBackend(callback);\n\n\t\t} else {\n\t\t\tlet subscription = await webapp.serviceWorkerRegistration.pushManager.getSubscription()\n\t\t\tlocalStorage.setItem(LS_USER_SUBSCRIBED_STATUS, 'subscribed');\n\t\t\twebapp.subscription = subscription;\n\t\t\twebapp.isSubscribed = true;\n\t\t\tawait webapp.subscribeWithBackend(callback);\n\t\t}\n\t}\n\n\twebapp.unsubscribe = function () {\n\t\tif (webapp.serviceWorkerRegistration) {\n\t\t\twebapp.reportSubscriptionChangeStart();\n\t\t\tif (webapp.is_safari_with_apns()) {\n\t\t\t\tvar permData = window.safari.pushNotification.permission(webapp.apns_push_id)\n\t\t\t\twebapp.subscription = permData.deviceToken;\n\t\t\t\twebapp.isSubscribed = false;\n\t\t\t\tlocalStorage.setItem(LS_USER_SUBSCRIBED_STATUS, 'unsubscribed');\n\t\t\t\twebapp.unsubscribeWithBackend();\n\t\t\t} else {\n\t\t\t\twebapp.serviceWorkerRegistration.pushManager.getSubscription()\n\t\t\t\t\t.then(function (subscription) {\n\t\t\t\t\t\twebapp.subscription = subscription;\n\t\t\t\t\t\twebapp.isSubscribed = false;\n\t\t\t\t\t\tlocalStorage.setItem(LS_USER_SUBSCRIBED_STATUS, 'unsubscribed');\n\t\t\t\t\t\twebapp.unsubscribeWithBackend();\n\t\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n\twebapp.inSubscribedStatus = function () {\n\t\tvar userSubStatus = localStorage.getItem(LS_USER_SUBSCRIBED_STATUS);\n\t\treturn userSubStatus === 'subscribed';\n\t}\n\n\twebapp.updateTokenIfChanged = async function () {\n\t\tif (!bowser.safari && webapp.getTrackerSerialno()) {\n\t\t\tlet token = await webapp.serviceWorkerRegistration.pushManager.getSubscription()\n\t\t\ttoken = token ? JSON.stringify(token) : JSON.stringify({});\n\n\t\t\tvar cachedToken = await webapp.idbCache.get('pushToken');\n\n\t\t\tif (cachedToken != token) {\n\t\t\t\tawait webapp.updateToken(token);\n\t\t\t\tPeakPwa.webapp.logEvent(token != \"{}\" ? 'push_token_set' : 'push_token_cleared');\n\t\t\t}\n\n\t\t\tif ((token == '{}') && PeakPwa.webapp.getPermissionStatus() == 'granted') {\n\t\t\t\twebapp.handlePermissionGranted();\n\t\t\t}\n\t\t}\n\t}\n\n\twebapp.updateToken = async function (push_token) {\n\t\tvar payload = {\n\t\t\tpush_token: push_token\n\t\t}\n\t\tlet response = await fetch(`${webapp.domain}/api/passes/tracker/${webapp.getTrackerSerialno()}/updatetoken/`, {\n\t\t\tmethod: \"POST\",\n\t\t\tbody: JSON.stringify(payload),\n\t\t\theaders: {\n\t\t\t\t'Accept': 'application/json',\n\t\t\t\t'Content-Type': 'application/json'\n\t\t\t}\n\t\t})\n\t\tawait webapp.idbCache.set('pushToken', push_token);\n\t}\n\n\twebapp.logEvent = function(event) {\n\t\twebapp.logEvents([event]);\n\t} \n\n\twebapp.logEvents = async function (events) {\n\t\tif (!webapp.isOnline()) return;\n\t\t\n\t\t// console.log(events);\n\n\t\t// Check and filter out throttled events\n\t\tvar c_promises = [];\n\t\tfor (var i = 0; i < events.length; i++) {\n\t\t\tc_promises.push(checkEventThrottle(events[i]));\n\t\t}\n\t\tevents = await Promise.all(c_promises)\n\t\tevents = events.filter(function (value, index, arr) {\n\t\t\treturn value ? value : false;\n\t\t});\n\n\t\tif (!events.length) return;\n\n\t\t// Log events\n\t\tlet payload = {\n\t\t\t'app': webapp.app,\n\t\t\t'action_list': events,\n\t\t\t'action_qualifier': '',\n\t\t\t'template_serialno': webapp.serialno,\n\t\t\t'tracker_serialno': webapp.getTrackerSerialno(),\n\t\t\t'metadata': {}\n\t\t};\n\n\t\tif (bowser.mobile && bowser.safari) {\n\t\t\tvar device_lib_id = await webapp.getDeviceLibraryId();\n\t\t\tif (device_lib_id) {\n\t\t\t\tpayload['tracker_devicelibraryid'] = device_lib_id;\n\t\t\t}\t\t\t\n\t\t}\n\n\t\tvar serialno = webapp.getTrackerSerialno();\n\t\tlet response = await fetch(`${webapp.domain}/api/passes/action/log/`, {\n\t\t\tmethod: \"POST\",\n\t\t\tcache: \"no-cache\",\n\t\t\tbody: JSON.stringify(payload),\n\t\t\theaders: {\n\t\t\t\t'Accept': 'application/json',\n\t\t\t\t'Content-Type': 'application/json'\n\t\t\t}\n\t\t})\n\t\t\n\t\t// If tracker/template not found, reset\n\t\tif (response.status == 400) {\n\t\t\tlet text = await response.text();\n\t\t\tif (text.toLowerCase().indexOf('template') >= 0 || text.toLowerCase().indexOf('tracker') >= 0) {\n\t\t\t\twebapp.reset();\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\n\t\t// Update throttles\n\t\tfor (var i = 0; i < events.length; i++) {\n\t\t\tvar event = events[i];\n\t\t\tif (webapp.constants.action_throttles[event]) {\n\t\t\t\tvar cache_key = `${NAMESPACE}_throttle_${event}`;\n\t\t\t\tlocalforage.setItem(cache_key, Date.now())\n\t\t\t}\n\t\t}\n\t}\n\n\tasync function checkEventThrottle(event) {\n\t\tif (!webapp.constants.action_throttles && !webapp.constants.action_throttles[event]) {\n\t\t\treturn event;\n\t\t}\n\n\t\tvar cache_key = `${NAMESPACE}_throttle_${event}`;\n\t\tlet last_log = await localforage.getItem(cache_key)\n\t\tif (!last_log) return event;\n\t\t\n\t\tlast_log = new Date(last_log).getTime();\n\t\tvar now = Date.now()\n\t\tvar throttle_delta = getThrottleDelta(event);\n\t\tif ((now - last_log) > throttle_delta) {\n\t\t\treturn event;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tfunction getThrottleDelta(event) {\n\t\tvar delta = webapp.constants.action_throttles[event];\n\t\tif (!delta) return 0;\n\t\treturn convertJsonDeltaToMs(delta);\n\t}\n\n\n\t/** Location Handling **/\n\n\twebapp.isGeoLocationEnabled = function () {\n\t\tif (localStorage.getItem(`${NAMESPACE}_geo_enabled`) == 'true') {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\twebapp.getGeolocation = function (onSuccess, onError) {\n\t\tfunction showLocation(position) {\n\t\t\tvar latitude = position.coords.latitude;\n\t\t\tvar longitude = position.coords.longitude;\n\t\t\tlocalStorage.setItem(`${NAMESPACE}_geo_enabled`, 'true');\n\t\t\t// console.log(\"Latitude : \" + latitude + \" Longitude: \" + longitude);\n\n\t\t\tif (latitude == localStorage.getItem(`${NAMESPACE}_geo_lat`) &&\n\t\t\t\tlongitude == localStorage.getItem(`${NAMESPACE}_geo_long`)) {\n\t\t\t\t// console.log('Not updating location as location is unchanged.')\n\t\t\t\tif (typeof onSuccess == 'function') onSuccess(latitude, longitude);\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tlocalStorage.setItem(`${NAMESPACE}_geo_lat`, latitude);\n\t\t\tlocalStorage.setItem(`${NAMESPACE}_geo_long`, longitude);\n\t\t\twebapp.updateLocation(latitude, longitude);\n\t\t\tif (typeof onSuccess == 'function') onSuccess(latitude, longitude);\n\t\t}\n\n\t\tfunction errorHandler(err) {\n\t\t\t// console.log(err)\n\t\t\tlocalStorage.setItem(`${NAMESPACE}_geo_enabled`, 'false')\n\t\t\tif (typeof onError == 'function') onError(err);\n\t\t\t// if(err.code == 1) {\n\t\t\t// \t// alert(\"Error: Access is denied!\");\n\t\t\t// }\telse if( err.code == 2) {\n\t\t\t// \t// alert(\"Error: Position is unavailable!\");\n\t\t\t// }\n\t\t}\n\n\t\tif (navigator.geolocation) {\n\t\t\tvar options = {\n\t\t\t\ttimeout: 60000\n\t\t\t};\n\t\t\tnavigator.geolocation.getCurrentPosition(showLocation, errorHandler, options);\n\t\t} else {\n\t\t\t// console.log(\"Sorry, browser does not support geolocation!\");\n\t\t}\n\t}\n\n\twebapp.updateLocation = function (lat, lng) {\n\t\tvar tracker_sn = webapp.getTrackerSerialno();\n\t\tif (!tracker_sn) return;\n\t\tfetch(`${webapp.domain}/p/${tracker_sn}/locations/`, {\n\t\t\tmethod: \"POST\",\n\t\t\tbody: JSON.stringify({\n\t\t\t\tlat: lat,\n\t\t\t\tlng: lng\n\t\t\t})\n\t\t}).then((response) => {\n\n\t\t})\n\t}\n\n\twebapp.updateLocIfNeeded = function () {\n\t\tif (bowser.name == 'Safari') {\n\t\t\treturn;\n\t\t}\n\t\tif (!webapp.isOnline()) return;\n\n\t\tvar delta = webapp.constants.location_update_throttle;\n\t\tif (!delta) return;\n\n\t\tvar cache_key = `${NAMESPACE}_location_update_ts`;\n\t\tvar throttle_delta = convertJsonDeltaToMs(delta);\n\t\tlocalforage.getItem(cache_key)\n\t\t\t.then(function (last_log) {\n\t\t\t\tif (!last_log) {\n\t\t\t\t\tlocalforage.setItem(cache_key, Date.now())\n\t\t\t\t\twebapp.getGeolocation()\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tlast_log = new Date(last_log).getTime();\n\t\t\t\tvar now = Date.now()\n\t\t\t\tif ((now - last_log) > throttle_delta) {\n\t\t\t\t\t// console.log('Updating Location..');\n\t\t\t\t\twebapp.getGeolocation()\n\t\t\t\t\tlocalforage.setItem(cache_key, Date.now())\n\t\t\t\t} else {\n\t\t\t\t\t// console.log('Not Updating Location');\n\t\t\t\t}\n\t\t\t});\n\t}\n\n\n\t/** IndexedDB Cache **/\n\n\twebapp.idbCache = (function () {\n\t\tvar IDB_CACHES = {\n\t\t\tnotif: 'notifs-db',\n\t\t\tldata: 'ldata-db',\n\t\t\tunread: 'unread-db'\n\t\t}\n\n\t\tfunction getLoyaltyData() {\n\t\t\treturn localforage.getItem(IDB_CACHES.ldata)\n\t\t\t\t.catch(function (err) {});\n\t\t}\n\n\t\tfunction getNotifications() {\n\t\t\treturn localforage.getItem(IDB_CACHES.notif)\n\t\t\t\t.catch(function (err) {\n\t\t\t\t\t// console.log(err);\n\t\t\t\t});\n\t\t}\n\n\t\tfunction deleteNotification(id) {\n\t\t\treturn localforage.getItem(IDB_CACHES.notif)\n\t\t\t\t.then((data) => {\n\t\t\t\t\tif (!data) data = [];\n\t\t\t\t\tfor (var j = 0; j < data.length; j++) {\n\t\t\t\t\t\tif (data[j].id == id || (!data[j].id && !id)) {\n\t\t\t\t\t\t\tdata.splice(j, 1)\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\n\t\t\t\t\treturn localforage.setItem(IDB_CACHES.notif, data);\n\t\t\t\t})\n\t\t}\n\n\t\tfunction cacheNotifications(notifs) {\n\t\t\treturn localforage.setItem(IDB_CACHES.notif, notifs);\n\t\t}\n\n\t\tfunction getUnreadCount() {\n\t\t\treturn localforage.getItem(IDB_CACHES.unread)\n\t\t\t\t.catch(function (err) {\n\t\t\t\t\t// console.log(err);\n\t\t\t\t});\n\t\t}\n\n\t\tfunction setUnreadCount(count) {\n\t\t\treturn localforage.setItem(IDB_CACHES.unread, count);\n\t\t}\n\n\t\tfunction dropCaches() {\n\t\t\tlocalforage.clear();\n\t\t\tfor (var key in IDB_CACHES) {\n\n\t\t\t}\n\t\t}\n\n\t\tfunction set(key, val) {\n\t\t\treturn localforage.setItem(key, val);\n\t\t}\n\n\t\tfunction get(key) {\n\t\t\treturn localforage.getItem(key);\n\t\t}\n\n\t\tfunction init() {\n\t\t\tif (webapp.constants.app != 'website' && webapp.constants.tracker_serialno) {\n\t\t\t\tvar tracker_sn = webapp.constants.tracker_serialno;\n\t\t\t\tIDB_CACHES = {\n\t\t\t\t\tnotif: `notifs-db-${tracker_sn}`,\n\t\t\t\t\tldata: `ldata-db-${tracker_sn}`,\n\t\t\t\t\tunread: `unread-db-${tracker_sn}`\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (webapp.constants.app != 'website') {\n\t\t\t\tvar serialno = webapp.constants.tracker_serialno;\n\t\t\t\tserialno.replace('-', '_');\n\t\t\t\tconsole.log('idbCache init');\n\t\t\t\tlocalforage.config({\n\t\t\t\t\tname: webapp.constants.tracker_serialno ? `PeakPwa_${serialno}` : 'PeakPwa',\n\t\t\t\t\tversion: 1.0,\n\t\t\t\t\tstoreName: 'PeakPwaStore',\n\t\t\t\t\tdescription: 'A storage for PeakPwa specific items.'\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tinit: init,\n\t\t\tgetLoyaltyData: getLoyaltyData,\n\t\t\tgetNotifications: getNotifications,\n\t\t\tdeleteNotification: deleteNotification,\n\t\t\tcacheNotifications: cacheNotifications,\n\t\t\tgetUnreadCount: getUnreadCount,\n\t\t\tsetUnreadCount: setUnreadCount,\n\t\t\tdropCaches: dropCaches,\n\t\t\tset: set,\n\t\t\tget: get,\n\t\t\tIDB_CACHES: IDB_CACHES\n\t\t}\n\t})();\n\n\n\t/** Browser Support **/\n\n\twebapp.getSupportedBrowsersForPwa = function () {\n\t\treturn PWA_SUPPORTED_BROWSERS;\n\t}\n\n\twebapp.getSupportedBrowsersForNotifications = function () {\n\t\treturn NOTIFICATIONS_SUPPORTED_BROWSERS;\n\t}\n\n\twebapp.reload = function () {\n\t\tif (webapp.onReload && typeof (webapp.onReload) == 'function') {\n\t\t\twebapp.onReload();\n\t\t}\n\n\t\t//Drop all default IDB caches\n\t\tif (webapp.idbCache) webapp.idbCache.dropCaches();\n\n\t\t//Msg SW to reload or reload\n\t\tif ('serviceWorker' in navigator && navigator.serviceWorker.controller) {\n\t\t\tnavigator.serviceWorker.controller.postMessage('refresh');\n\t\t} else {\n\t\t\tlocation.reload();\n\t\t}\n\t}\n\n\twebapp.reset = function () {\n\t\twebapp.idbCache.dropCaches();\n\t\tlocalStorage.clear();\n\t\tlet isPermGranted = webapp.getPermissionStatus() == 'granted';\n\t\tif (isPermGranted) {\n\t\t\twebapp.subscribe(function () {\n\t\t\t\twebapp.logVisitEvents();\n\t\t\t});\n\t\t} else {\n\t\t\twebapp.reportSubscriptionChange();\n\t\t}\n\t}\n\n\treturn {\n\t\tinit: webapp.init,\n\t\tsubscribe: webapp.subscribe,\n\t\tunsubscribe: webapp.unsubscribe,\n\t\tisSubscribed: webapp.inSubscribedStatus,\n\t\tisMobile: webapp.isMobile,\n\t\tisOnline: webapp.isOnline,\n\t\tisAddedToHomescreen: webapp.isAddedToHomescreen,\n\t\tgetNotifications: webapp.getNotifications,\n\t\t// getLatestNotifications: webapp.getLatestNotifications,\n\t\tdeleteNotification: webapp.deleteNotification,\n\t\trequestNotificationPermissionAndSubscribe: webapp.requestNotificationPermissionAndSubscribe,\n\t\tgetPermissionStatus: webapp.getPermissionStatus,\n\t\tidbCache: webapp.idbCache,\n\t\tgetUiMode: webapp.getUiMode,\n\t\tisPwaSupported: webapp.isPwaSupported,\n\t\tisNotificationSupported: webapp.isNotificationSupported,\n\t\twebapp: webapp\n\t}\n}();\n\nexport default PeakPwa","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/routes/RestrictedRoute.js",[],["233","234"],"/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/routes/PrivateRoute.js",[],"/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/pages/Home/HomeView.js",["235","236","237","238","239","240","241"],"import React from 'react';\nimport logo from './../../logo.png';\n\nimport Container from '@material-ui/core/Container';\nimport Typography from '@material-ui/core/Typography';\nimport { Button, Paper } from '@material-ui/core';\n\nimport NotificationPermissionWidget from './NotificationPermWidget'\nimport RecentNotification from './RecentNotification'\nimport UserCard from './UserCard'\nimport HomeActionsList from './HomeActionsList'\nimport CustomerDataWidget from './CustomerDataWidget'\nimport DailyDataWidget from './DailyDataWidget'\n\nimport PeakPwa from './../../services/peakpwa'\n\n\n\nclass HomeView extends React.Component {\n  constructor(props) {\n    super(props);\n\n    this.state = {\n      isPermGranted: PeakPwa.getPermissionStatus() == 'granted',\n      isPushRecieved: false\n    }\n\n    this.handlePermissionChange = this.handlePermissionChange.bind(this);\n    this.handlePushReceived = this.handlePushReceived.bind(this);\n  }\n\n  componentDidMount() {\n    document.addEventListener('onSubscriptionChange', this.handlePermissionChange);\n    navigator.serviceWorker.addEventListener('message', this.handlePushReceived);\n  }\n\n  componentWillUnmount() {\n    document.removeEventListener('onSubscriptionChange', this.handlePermissionChange);\n    navigator.serviceWorker.removeEventListener('message', this.handlePushReceived);\n  }\n\n  handlePermissionChange() {\n    console.log('handlePermissionChange')\n    this.setState({\n      isPermGranted: PeakPwa.getPermissionStatus() == 'granted'\n    });\n  }\n\n  handlePushReceived(e) {\n\tconsole.log('handlePushReceived');\n\tconsole.log(e.data);\n    if(e.data.action == 'push_received') {\n      this.setState({\n        isPushRecieved: true\n      });\n    }\n  }\n\n  render() {\n    return (\n      <Container style={{padding: '1rem'}}>\n        <RecentNotification />\n        <UserCard state={this.props.state} />\n        {!this.state.isPermGranted ? <NotificationPermissionWidget /> : ''}\n        <CustomerDataWidget />\n        <DailyDataWidget />\n        <HomeActionsList />     \n      </Container>\n  );\n  }\n }\n\n\n\nexport default HomeView;","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/pages/Login/LoginPage.js",["242","243","244","245","246","247","248","249","250","251","252"],"import React from \"react\";\nimport Container from \"@material-ui/core/Container\";\nimport Typography from \"@material-ui/core/Typography\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Button from \"@material-ui/core/Button\";\nimport Alert from \"@material-ui/lab/Alert\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport logo from \"./../../logo.png\";\n\nimport AuthService from \"./../../services/auth-service\";\n\nimport LoadingButton from \"./../../Components/LoadingButton\";\nimport Constants from \"../../constants\";\nimport { fetchData, getQueryParam } from \"./../../helpers/helpers\";\nimport { Box } from \"@material-ui/core\";\nimport { useHistory } from \"react-router\";\nimport { Switch, Route } from \"react-router-dom\";\n\nclass LoginPage extends React.Component {\n  render() {\n    let path = this.props.match.path;\n    console.log(\"LoginPage\");\n    console.log(path);\n    return (\n      <Container maxWidth=\"sm\" className=\"\">\n        <Paper\n          style={{ padding: \"2rem\", textAlign: \"center\", marginTop: \"1rem\" }}>\n          <img\n            src={process.env.PUBLIC_URL + \"/Aadhar-Color.png\"}\n            className=\"App-logo\"\n            alt=\"logo\"\n            style={{ padding: \"1rem\" }}\n          />\n          <Grid container style={{ marginBottom: \"1rem\" }}>\n            <Grid item xs={12}>\n              <Typography variant=\"h5\" component=\"h1\">\n                Welcome to Adhaar Reporting App\n              </Typography>\n            </Grid>\n          </Grid>\n          <Switch>\n            <Route path={path} exact>\n              <LoginForm onLoginSuccess={this.props.onLoginSuccess} />\n            </Route>\n            <Route path={\"/password_reset\"} exact>\n              <PasswordResetRequestForm />\n            </Route>\n            <Route path={\"/password_reset/validate\"} exact>\n              <PasswordResetConfirmForm />\n            </Route>\n          </Switch>\n        </Paper>\n      </Container>\n    );\n  }\n}\n\nfunction LoginForm({ onLoginSuccess }) {\n  const [state, setState] = React.useState({\n    general_error: \"\",\n    isLoading: false,\n  });\n  const [username, setUsername] = React.useState(\"\");\n  const [password, setPassword] = React.useState(\"\");\n  //   const [username, setUsername] = React.useState('');\n  //   const [username, setUsername] = React.useState('');\n  let history = useHistory();\n  const handleSubmit = async function (e) {\n    e.preventDefault();\n    if (!window.navigator.onLine) {\n      setState({\n        general_error:\n          \"You are currently offline. Please connect to the internet to perform this action.\",\n        isLoading: false,\n      });\n      return;\n    }\n\n    setState({\n      general_error: \"\",\n      isLoading: true,\n    });\n\n    try {\n      let { user_data, state_data } = await AuthService.auth(\n        username,\n        password\n      );\n      onLoginSuccess(user_data, state_data);\n    } catch (err) {\n      console.log(err);\n      setState({ isLoading: false });\n\n      for (const key in err.response) {\n        if (key == \"non_field_errors\" || key == \"detail\") {\n          setState({\n            general_error: err.response[key],\n          });\n        }\n      }\n    }\n  };\n\n  return (\n    <form className=\"login-form\" autoComplete=\"off\" onSubmit={handleSubmit}>\n      <Grid container spacing={3}>\n        {state.general_error ? (\n          <Grid item xs={12}>\n            <Alert severity=\"error\">{state.general_error}</Alert>\n          </Grid>\n        ) : (\n          \"\"\n        )}\n\n        <Grid item xs={12}>\n          <TextField\n            fullWidth\n            name=\"username\"\n            label=\"Phone No/Email\"\n            variant=\"outlined\"\n            value={username}\n            onChange={(event) => {\n              setUsername(event.target.value);\n            }}\n            disabled={state.isLoading}\n            required\n          />\n        </Grid>\n        <Grid item xs={12}>\n          <TextField\n            fullWidth\n            name=\"password\"\n            label=\"Password\"\n            type=\"Password\"\n            variant=\"outlined\"\n            value={password}\n            onChange={(event) => {\n              setPassword(event.target.value);\n            }}\n            disabled={state.isLoading}\n            required\n          />\n        </Grid>\n        <Grid item xs={12}>\n          <LoadingButton\n            btnText=\"Login\"\n            loadingText=\"Logging In\"\n            isLoading={state.isLoading}\n            color=\"secondary\"\n            fullWidth\n            type=\"submit\"\n            variant=\"contained\"\n            size=\"large\"\n          />\n          <Button\n            style={{ marginTop: \"1rem\" }}\n            onClick={() => {\n              history.push(\"/password_reset/\");\n            }}\n            color=\"secondary\"\n            variant=\"text\">\n            Set/Reset Password\n          </Button>\n        </Grid>\n      </Grid>\n    </form>\n  );\n}\n\nfunction PasswordResetRequestForm({}) {\n  let history = useHistory();\n  const [isSuccess, setSuccess] = React.useState(null);\n  const [state, setState] = React.useState({\n    general_error: \"\",\n    isLoading: false,\n  });\n\n  const [username, setUsername] = React.useState(\"\");\n\n  const handleSubmit = async function (e) {\n    if (!window.navigator.onLine) {\n      setState({\n        general_error:\n          \"You are currently offline. Please connect to the internet to perform this action.\",\n        isLoading: false,\n      });\n      return;\n    }\n    e.preventDefault();\n    setState({\n      general_error: \"\",\n      isLoading: true,\n    });\n\n    try {\n      let resp = await fetchData(\n        \"POST\",\n        `${Constants.domain}/api/reset_password/request/`,\n        {\n          username: username,\n          redirect_url: `${Constants.domain}/s/d/aadhaar/password_reset/validate/`,\n          send_sms: true,\n        }\n\t  );\n      setSuccess(true);\n      // let {user_data, state_data} = await AuthService.auth(this.state.username, this.state.password)\n      //   onLoginSuccess(user_data, state_data);\n    } catch (err) {\n      setState({\n        isLoading: false,\n      });\n      for (const key in err.response) {\n        if (key == \"non_field_errors\" || key == \"detail\") {\n          setState({\n            general_error: err.response[key],\n          });\n        }\n      }\n    }\n  };\n\n  return (\n    <div>\n      {isSuccess ? (\n        <Box>\n          <Typography>\n            Password reset link has been sent to your email and phone.\n          </Typography>\n          <Button\n            style={{ marginTop: \"1rem\" }}\n            onClick={() => {\n              history.push(\"/\");\n            }}\n            color=\"secondary\"\n            variant=\"text\">\n            Return to Login\n          </Button>\n        </Box>\n      ) : (\n        <form\n          className=\"password-reset-req-form\"\n          autoComplete=\"off\"\n          onSubmit={handleSubmit}>\n          <Grid container spacing={3}>\n            <Grid item xs={12}>\n              <Box textAlign=\"left\">\n                <Typography variant=\"body1\" color=\"textSecondary\">\n                  Enter your phone or email address below to receive a password\n                  reset link.\n                </Typography>\n              </Box>\n            </Grid>\n            {state.general_error ? (\n              <Grid item xs={12}>\n                <Alert severity=\"error\">{state.general_error}</Alert>\n              </Grid>\n            ) : (\n              \"\"\n            )}\n\n            <Grid item xs={12}>\n              <TextField\n                fullWidth\n                name=\"username\"\n                label=\"Phone No/Email\"\n                variant=\"outlined\"\n                value={username}\n                onChange={(event) => setUsername(event.target.value)}\n                disabled={state.isLoading}\n                required\n              />\n            </Grid>\n            <Grid item xs={12}>\n              <LoadingButton\n                btnText=\"Send Password Link\"\n                loadingText=\"Sending Password Link\"\n                isLoading={state.isLoading}\n                color=\"secondary\"\n                fullWidth\n                type=\"submit\"\n                variant=\"contained\"\n                size=\"large\"\n              />\n              <Button\n                style={{ marginTop: \"1rem\" }}\n                onClick={() => {\n                  history.push(\"/\");\n                }}\n                color=\"secondary\"\n                variant=\"text\">\n                Return to Login\n              </Button>\n            </Grid>\n          </Grid>\n        </form>\n      )}\n    </div>\n  );\n}\n\nfunction PasswordResetConfirmForm({}) {\n  let history = useHistory();\n  const [isSuccess, setSuccess] = React.useState(null);\n  const [state, setState] = React.useState({\n    general_error: \"\",\n    isLoading: false,\n  });\n\n  const [password, setPassword] = React.useState(\"\");\n  const [password2, setPassword2] = React.useState(\"\");\n\n  const handleSubmit = async function (e) {\n    e.preventDefault();\n    if (!window.navigator.onLine) {\n      setState({\n        general_error:\n          \"You are currently offline. Please connect to the internet to perform this action.\",\n        isLoading: false,\n      });\n      return;\n    }\n    if (password !== password2) {\n      setState({\n        general_error: \"The 2 enetered passwords do not match.\",\n        isLoading: false,\n      });\n      return;\n    }\n    setState({\n      general_error: \"\",\n      isLoading: true,\n    });\n\n    try {\n      await fetchData(\n        \"POST\",\n        `${Constants.domain}/api/reset_password/confirm/`,\n        {\n          new_password: password,\n          token: getQueryParam(\"password_token\"),\n          //   send_sms: true,\n        }\n      );\n      setSuccess(true);\n      // let {user_data, state_data} = await AuthService.auth(this.state.username, this.state.password)\n      // onLoginSuccess(user_data, state_data);\n    } catch (err) {\n      console.log(err);\n      for (const key in err.response) {\n        if (key == \"non_field_errors\" || key == \"detail\") {\n          setState({\n            general_error: err.response[key],\n            isLoading: false,\n          });\n        }\n      }\n    }\n  };\n\n  return (\n    <div>\n      {isSuccess ? (\n        <Box>\n          <Typography>Your password has been updated successfully</Typography>\n\n          <Button\n            style={{ marginTop: \"1rem\" }}\n            onClick={() => {\n              history.push(\"/\");\n            }}\n            color=\"secondary\"\n            variant=\"text\">\n            Return to Login\n          </Button>\n        </Box>\n      ) : (\n        <form\n          className=\"password-reset-req-form\"\n          autoComplete=\"off\"\n          onSubmit={handleSubmit}>\n          <Grid container spacing={3}>\n            <Grid item xs={12}>\n              <Box textAlign=\"left\">\n                <Typography variant=\"body1\" color=\"textSecondary\">\n                  Enter your new password below to set it.\n                </Typography>\n              </Box>\n            </Grid>\n\n            {state.general_error ? (\n              <Grid item xs={12}>\n                <Alert severity=\"error\">{state.general_error}</Alert>\n              </Grid>\n            ) : (\n              \"\"\n            )}\n            <Grid item xs={12}>\n              <TextField\n                fullWidth\n                name=\"password\"\n                label=\"Password\"\n                variant=\"outlined\"\n                type=\"password\"\n                value={password}\n                onChange={(event) => setPassword(event.target.value)}\n                disabled={state.isLoading}\n                required\n              />\n            </Grid>\n            <Grid item xs={12}>\n              <TextField\n                fullWidth\n                name=\"password2\"\n                type=\"password\"\n                label=\"Repeat Password\"\n                variant=\"outlined\"\n                value={password2}\n                onChange={(event) => setPassword2(event.target.value)}\n                disabled={state.isLoading}\n                required\n              />\n            </Grid>\n            <Grid item xs={12}>\n              <LoadingButton\n                btnText=\"Reset Password\"\n                loadingText=\"Resetting Password\"\n                isLoading={state.isLoading}\n                color=\"secondary\"\n                fullWidth\n                type=\"submit\"\n                variant=\"contained\"\n                size=\"large\"\n              />\n              <Button\n                style={{ marginTop: \"1rem\" }}\n                onClick={() => {\n                  history.push(\"/\");\n                }}\n                color=\"secondary\"\n                variant=\"text\">\n                Return to Login\n              </Button>\n            </Grid>\n          </Grid>\n        </form>\n      )}\n    </div>\n  );\n}\n\nexport default LoginPage;\n","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/pages/CustomerDataPage/CustomerDataPage.js",["253","254"],"import React from 'react';\n\nimport Container from '@material-ui/core/Container';\n\nimport { \n    Switch,\n    Route,\n  } from \"react-router-dom\";\n\nimport CustomerDataForm from './CustomerDataForm'\nimport CustomerDataList from './CustomerDataList'\n\nimport AadharDataService from './../../services/customer-data-service'\n\nclass CustomerDataPage extends React.Component {\n    render() {\n        let path = this.props.match.path;\n        return (\n            <Switch>\n                <Route exact path={path} component={CustomerDataList} />\n                <Route path={`${path}/add`} component={CustomerDataForm} />\n                <Route path={`${path}/edit/:id`} component={CustomerDataForm} />\n            </Switch>\n        )\n    }\n}\n\nexport default CustomerDataPage","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/pages/NotificationPage/NotificationPage.js",["255","256","257","258","259"],"/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/pages/Home/HomeActionsList.js",["260","261","262","263"],"import React, { useState } from 'react'\nimport { makeStyles } from '@material-ui/core/styles';\nimport List from '@material-ui/core/List';\nimport Paper from '@material-ui/core/Paper';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\nimport ListSubheader from '@material-ui/core/ListSubheader';\n// import ListItemLink from '@material-ui/core/ListItemLink';\nimport Divider from '@material-ui/core/Divider';\nimport { useHistory } from 'react-router';\n\nimport GroupAddIcon from '@material-ui/icons/GroupAdd';\nimport AssignmentIcon from '@material-ui/icons/Assignment';\nimport ErrorIcon from '@material-ui/icons/Error';\n\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n      width: '100%',\n      marginTop: '1rem',\n      backgroundColor: theme.palette.background.paper,\n    },\n  }));\n\nexport default function HomeActionsList() {\n    const classes = useStyles();\n    // const [path, setPath] = useState(0);\n    const history = useHistory();\n\n    return (\n      <Paper className={classes.root}>\n\n        <List component=\"nav\" aria-label=\"secondary mailbox folders\">\n        {/* <ListSubheader>Other Actions</ListSubheader> */}\n          <ListItem button onClick={(e) => {history.push('/marketingactivity')}} >\n            <ListItemIcon>\n              <AssignmentIcon />\n            </ListItemIcon>\n            <ListItemText primary=\"Report Marketing Activity\" />\n          </ListItem>\n          <ListItem button onClick={(e) => {history.push('/issues')}} >\n            <ListItemIcon>\n              <ErrorIcon />\n            </ListItemIcon>\n            <ListItemText primary=\"Create New Issue\" />\n          </ListItem>\n        </List>\n      </Paper>\n    );\n  }","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/pages/Home/UserCard.js",["264","265","266","267","268","269","270","271","272","273","274"],"import React, { useState } from 'react';\n\nimport { makeStyles } from '@material-ui/core/styles';\nimport Card from '@material-ui/core/Card';\nimport CardActions from '@material-ui/core/CardActions';\nimport CardContent from '@material-ui/core/CardContent';\nimport Button from '@material-ui/core/Button';\nimport Grid from '@material-ui/core/Grid';\nimport Avatar from '@material-ui/core/Avatar';\nimport Container from '@material-ui/core/Container';\nimport Paper from '@material-ui/core/Paper';\nimport Box from '@material-ui/core/Box';\nimport Typography from '@material-ui/core/Typography';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport NotificationsActiveIcon from '@material-ui/icons/NotificationsActive';\nimport AccountCircleIcon from '@material-ui/icons/AccountCircle';\n\nimport PeakPwa from './../../services/peakpwa'\n\nconst useStyles = makeStyles({\n  root: {\n    // maxWidth: 345,\n    // marginTop: '1rem',\n    padding: '1rem'\n  },\n  media: {\n    // height: 140,\n  },\n});\n\nexport default function UserCard(props) {\n  const classes = useStyles();\n  const [isLoading, setLoading] = useState(false);\n\n  const handleClick = (e) => {\n    setLoading(true);\n    // PeakPwa.requestNotificationPermissionAndSubscribe();\n  }\n\n  return (\n     <Paper className={classes.root}>\n        <Grid container spacing={1}>\n            <Grid item xs={12} container spacing={2} alignItems=\"center\">\n                <Grid item xs={2} >\n                    <Avatar color=\"primary\">\n                        <AccountCircleIcon />\n                    </Avatar>\n                </Grid>\n                <Grid item xs={10}>\n                    {/* <Typography variant=\"caption\" style={{lineHeight: 1}}>Employee Name</Typography> */}\n                    <Typography variant=\"h6\" color=\"primary\">{props.state.name}</Typography>\n                </Grid>\n            </Grid>\n            <Grid item xs={12} container spacing={1}>\n                <Grid item xs={2}></Grid>\n                <Grid item xs={5}>\n                    <Typography variant=\"caption\" component=\"div\" style={{lineHeight: 1.5}}>Employee Code</Typography>\n                    <Typography variant=\"body1\" component=\"div\" color=\"primary\">{props.state.filter3}</Typography>\n                </Grid>\n                <Grid item xs={5}>\n                    <Typography variant=\"caption\" component=\"div\"  style={{lineHeight: 1.5}}>Branch</Typography>\n                    <Typography variant=\"body1\" component=\"div\" color=\"primary\">{props.state.filter4}</Typography>\n                </Grid>\n            </Grid>\n        </Grid>\n     </Paper>\n  );\n}\n\n","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/pages/Home/NotificationPermWidget.js",[],"/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/helpers/helpers.js",[],"/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/pages/CustomerDataPage/CustomerDataForm.js",["275","276","277","278","279"],"import React from 'react';\n\nimport Container from '@material-ui/core/Container';\nimport Typography from '@material-ui/core/Typography';\nimport TextField from '@material-ui/core/TextField';\nimport Grid from '@material-ui/core/Grid';\nimport Button from '@material-ui/core/Button';\nimport Alert from '@material-ui/lab/Alert';\nimport CircularProgress from '@material-ui/core/CircularProgress';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport FormControl from '@material-ui/core/FormControl';\nimport Select from '@material-ui/core/Select';\nimport AadharDataService from '../../services/customer-data-service';\nimport { withRouter } from \"react-router-dom\";\nimport { withSnackbar } from 'notistack';\n\nimport FormContainer from './../../Components/FormContainer'\nimport LoadingButton from './../../Components/LoadingButton'\n\nclass CustomerDataForm extends React.Component {\n    constructor(props) {\n        super(props);\n\n        this.handleSubmit = this.handleSubmit.bind(this);\n        \n        this.state = {\n            name: '',\n            phone: '',\n            gender: 'male',\n            general_error: '',\n            customer_type: '',\n            service_availed: '',\n            cross_sell_lead_generated: '',\n            crm_no: '',\n            isLoading: false\n        }\n\n        if(props.match.params.id) {\n            // this.state = AadharDataService.get\n            this.state.isUpdate = true\n        }\n    }\n\n    async handleSubmit(e) {\n        e.preventDefault();\n        \n        this.setState({\n            general_error: '',\n            isLoading: true\n        });\n\n        try {\n            if(this.state.isUpdate) {\n                await AadharDataService.updateRecordInCache(this.props.match.params.id, this.state);\n                this.props.enqueueSnackbar('Customer Data Updated', {\n                    variant: 'success'\n                })\n            } else {\n                await AadharDataService.addRecordToCache(this.state);\n                this.props.enqueueSnackbar('Customer Data Added', {\n                    variant: 'success'\n                })\n            }\n            \n            this.props.history.push('/customerdata');\n            // let {user_data, state_data} = await AuthService.auth(this.state.username, this.state.password)           \n            // this.props.onLoginSuccess(user_data, state_data);        \n        } catch (err) {\n            console.log(err)\n            for (const key in err.response) {\n\t\t\t\tif(key == 'non_field_errors' || key == 'detail') {\n                    this.setState({\n                        general_error: err.response[key],\n                        isLoading: false                        \n                    });\n\t\t\t\t}\n\t\t\t}\n        }        \n    }\n\n    componentDidMount() {\n        if(this.props.match.params.id) {\n            let self = this;\n            // this.state = AadharDataService.get\n            // this.state.isUpdate = true\n            AadharDataService.getUnsyncedRecord(this.props.match.params.id).then(function(customer_data) {\n                self.setState(customer_data);\n            })\n        }\n        \n    }\n\n    render() {\n        return (\n            <FormContainer>\n                <form className='login-form' autoComplete=\"off\" onSubmit={this.handleSubmit}>                   \n                    <Grid container spacing={3}>\n\n                        <Grid item xs={12}>\n                            <Typography variant=\"h5\">{this.state.isUpdate ? 'Update Customer Record' : 'Add Customer Record' }</Typography>\n                        </Grid>\n                        {this.state.general_error \n                            ? <Grid item xs={12}>\n                                <Alert severity=\"error\">{this.state.general_error}</Alert>\n                                </Grid>                                   \n                            : ''\n                        }\n                        \n                        <Grid item xs={12}>\n                            <TextField \n                                fullWidth \n                                name=\"name\" \n                                label=\"Customer Name\" \n                                variant=\"outlined\" \n                                value={this.state.name} \n                                onChange={(event) => this.setState({ [event.target.name]: event.target.value })}\n                                disabled={this.state.isLoading}\n                                required />\n                        </Grid>\n                        <Grid item xs={12}>\n                            <TextField \n                                fullWidth \n                                name=\"phone\" \n                                label=\"Contact Number\" \n                                variant=\"outlined\" \n                                value={this.state.phone} \n                                onChange={(event) => this.setState({ [event.target.name]: event.target.value })}\n                                disabled={this.state.isLoading}\n                                type=\"number\"\n                                required />\n                        </Grid>\n                        <Grid item xs={12}>\n                        <FormControl variant=\"outlined\" fullWidth>\n                            <InputLabel id=\"select-gender\">Gender</InputLabel>\n                            <Select\n                                labelId=\"select-gender\"\n                                name=\"gender\" \n                                value={this.state.gender}\n                                onChange={(event) => this.setState({ [event.target.name]: event.target.value })}\n                                label=\"Age\" >\n                                <MenuItem value={'male'}>Male</MenuItem>\n                                <MenuItem value={'female'}>Female</MenuItem>\n                            </Select>\n                        </FormControl>\n\n                        </Grid>\n                        <Grid item xs={12}>\n                        <FormControl variant=\"outlined\" fullWidth>\n                            <InputLabel id=\"select-customer_type\">Customer Type</InputLabel>\n                            <Select\n                                labelId=\"select-customer_type\"\n                                name=\"customer_type\" \n                                value={this.state.customer_type}\n                                onChange={(event) => this.setState({ [event.target.name]: event.target.value })}\n                                label=\"Customer Type\" >\n                                <MenuItem value={'nonhdfc'}>Non HDFC Bank Customer</MenuItem>\n                                <MenuItem value={'hdfc'}>HDFC Bank Customer</MenuItem>\n                            </Select>\n                        </FormControl>\n                        </Grid>\n                        <Grid item xs={12}>\n                        <FormControl variant=\"outlined\" fullWidth>\n                            <InputLabel id=\"select-service_type\">Type of Service Availed</InputLabel>\n                            <Select\n                                labelId=\"select-service_type\"\n                                name=\"service_availed\" \n                                value={this.state.service_availed}\n                                onChange={(event) => this.setState({ [event.target.name]: event.target.value })}\n                                label=\"Type of Service Availed\" >\n                                    {['New Enrolment', 'Mandatory Biometric update',  'Biometric update with or without Demographic update', 'Demographic update'].map((item, i) => \n                                        <MenuItem value={item} key={i}>{item}</MenuItem>\n                                    )}                         \n                                \n                            </Select>\n                        </FormControl>\n                        </Grid>\n                        <Grid item xs={12}>\n                        <FormControl variant=\"outlined\" fullWidth>\n                            <InputLabel id=\"select-cross_sell_lead\">Cross Sell Lead</InputLabel>\n                            <Select\n                                labelId=\"select-cross_sell_lead\"\n                                name=\"cross_sell_lead_generated\" \n                                value={this.state.cross_sell_lead_generated}\n                                onChange={(event) => this.setState({ [event.target.name]: event.target.value })}\n                                label=\"Cross Sell Lead\" >\n                                    {['SA', 'CA', 'CSA', 'FD','PL', 'GL' , 'BL' ,'HL', 'AL' ,'TW', 'CC','LAP'].map((item, i) => \n                                        <MenuItem value={item} key={i}>{item}</MenuItem>\n                                    )}                         \n                                \n                            </Select>\n                        </FormControl>\n                        </Grid>\n                        <Grid item xs={12}>\n                            <TextField \n                                fullWidth \n                                name=\"crm_no\" \n                                label=\"CRM Number\" \n                                variant=\"outlined\" \n                                value={this.state.crm_no} \n                                onChange={(event) => this.setState({ [event.target.name]: event.target.value })}\n                                disabled={this.state.isLoading}\n                                type=\"number\"\n                                required />\n                        </Grid>\n                        <Grid item xs={12}>\n                            <LoadingButton \n                                btnText={this.state.isUpdate ? 'Update Customer Record' : 'Add Customer Record'}\n                                loadingText={this.state.isUpdate ? 'Updating Record' : 'Adding Record'}\n                                isLoading={this.state.isLoading}\n                                color=\"secondary\" \n                                fullWidth \n                                type=\"submit\" \n                                variant=\"contained\" \n                                size=\"large\"\n                            />\n                        </Grid>\n                    </Grid>                \n                </form>               \n            </FormContainer>\n        )\n    }\n}\n\n// export default CustomerDataForm;\n\nexport default withSnackbar(withRouter(CustomerDataForm));","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/pages/CustomerDataPage/CustomerDataList.js",["280","281","282","283","284","285","286","287","288","289","290","291"],"/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/pages/MarketingActivity/MarketingActivityPage.js",["292"],"import React from 'react';\nimport Container from '@material-ui/core/Container';\nimport { \n    Switch,\n    Route,\n  } from \"react-router-dom\";\nimport MarketingActivityForm from './MarketingActivityForm'\nimport MarketingActivityList from './MarketingActivityList'\n\n\nclass MarketingActivityPage extends React.Component {\n    render() {\n        let path = this.props.match.path;\n        return (\n            <Switch>\n                <Route exact path={path} component={MarketingActivityList} />\n                <Route path={`${path}/add`} component={MarketingActivityForm} />\n                <Route path={`${path}/edit/:id`} component={MarketingActivityForm} />\n            </Switch>\n        )\n    }\n}\n\nexport default MarketingActivityPage","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/pages/MarketingActivity/MarketingActivityForm.js",["293","294","295","296","297","298","299"],"/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/pages/MarketingActivity/MarketingActivityList.js",["300","301","302","303","304"],"/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/pages/DailyActivityPage/DailyActivityPage.js",["305","306"],"import React from 'react';\nimport Container from '@material-ui/core/Container';\nimport { \n    Switch,\n    Route,\n  } from \"react-router-dom\";\n\nimport DailyActivityList from './DailyActivityList'\nimport DailyActivityForm from './DailyActivityForm'\n\n\nclass DailyActivityPage extends React.Component {\n    render() {\n        let path = this.props.match.path;\n        return (\n            <Switch>\n                {/* <Route exact path={path} component={DailyActivityList} /> */}\n                <Route path={`${path}/add`} component={DailyActivityForm} />\n                <Route path={`${path}/edit/:id`} component={DailyActivityForm} />\n            </Switch>\n        )\n    }\n}\n\nexport default DailyActivityPage","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/pages/DailyActivityPage/DailyActivityForm.js",["307","308","309","310","311"],"/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/pages/DailyActivityPage/DailyActivityList.js",[],"/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/pages/IssuePage/IssuePage.js",["312"],"import React from 'react';\n\nimport Container from '@material-ui/core/Container';\n\nimport { \n    Switch,\n    Route,\n  } from \"react-router-dom\";\n\nimport IssueForm from './IssueForm'\nimport IssueList from './IssueList'\n\nclass CustomerDataPage extends React.Component {\n    render() {\n        let path = this.props.match.path;\n        return (\n            <Switch>\n                <Route exact path={path} component={IssueList} />\n                <Route path={`${path}/add`} component={IssueForm} />\n                <Route path={`${path}/edit/:id`} component={IssueForm} />\n            </Switch>\n        )\n    }\n}\n\nexport default CustomerDataPage","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/pages/IssuePage/IssueList.js",["313","314","315","316","317","318","319"],"/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/pages/IssuePage/IssueForm.js",["320","321","322","323","324"],"/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/Components/PageHeader.js",[],"/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/services/customer-data-service.js",["325","326","327","328","329","330","331","332","333","334"],"/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/Components/FormContainer.js",[],"/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/pages/Home/CustomerDataWidget.js",["335","336","337","338","339","340","341","342","343"],"/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/pages/Home/DailyDataWidget.js",["344","345","346","347","348","349"],"import React, { useEffect, useState } from 'react'\n\nimport AadharDataService from './../../services/customer-data-service'\nimport Typography from '@material-ui/core/Typography';\nimport Box from '@material-ui/core/Box';\nimport Card from '@material-ui/core/Card';\nimport CardContent from '@material-ui/core/CardContent';\n\nimport List from '@material-ui/core/List';\nimport ListItem from '@material-ui/core/ListItem';\nimport ListItemIcon from '@material-ui/core/ListItemIcon';\nimport ListItemText from '@material-ui/core/ListItemText';\n\nimport Divider from '@material-ui/core/Divider';\nimport ErrorIcon from '@material-ui/icons/Error';\nimport DoneIcon from '@material-ui/icons/Done';\nimport EditIcon from '@material-ui/icons/Edit';\nimport AddCircleIcon from '@material-ui/icons/AddCircle';\nimport EventAvailableIcon from '@material-ui/icons/EventAvailable';\nimport CircularProgress from '@material-ui/core/CircularProgress';\n\nimport { useHistory } from \"react-router-dom\";\nimport { makeStyles } from '@material-ui/core/styles';\n\nconst useStyles = makeStyles((theme) => ({\n    root: {\n        marginTop: '1rem'\n    },\n    highlightButton: {\n        // backgroundColor: theme.palette.background.paper,\n        color: theme.palette.info.dark\n    },\n}));\n\n\nexport default function DailyActivityWidget() {\n  \n    const [path, setPath] = useState(0);\n    const [isUploading, setIsUploading] = useState(false);\n    const [record, setRecord] = useState(null)\n\n    let history = useHistory();\n\n    const classes = useStyles();\n    //   let records = await AadharDataService.getUnsyncedRecord();\n    \n    useEffect(async () => {\n        let record = await AadharDataService.getCurrentDailyRecord();\n        setRecord(record);\n    }, [])\n\n\n    // const uploadRecords =  async function() {\n    //     setIsUploading(true);\n    //     await AadharDataService.uploadRecords();\n    //     let records = await AadharDataService.getUnsyncedRecords();\n    //     setRecords(records);\n    //     setIsUploading(false);\n    // }\n\n    return (\n        <Card className={classes.root}>\n            <CardContent>\n                <Box display=\"flex\" alignItems=\"center\" color=\"primary.main\">\n                    <EventAvailableIcon style={{marginRight: '1rem'}}/>\n                    <Typography variant=\"h6\">\n                        Daily Enrollments\n                    </Typography>\n                </Box>\n                {!record \n                    ?   <Box display=\"flex\" alignItems=\"center\" color=\"warning.main\" marginTop=\"1rem\"> \n                            <ErrorIcon style={{marginRight: '1rem'}}/>\n                            <Typography variant=\"body2\">You have not submitted a daily enrollment data for <b>{new Date().toLocaleDateString()}</b></Typography>\n                        </Box>\n                    :   <Box display=\"flex\" alignItems=\"center\" color=\"success.main\" marginTop=\"1rem\"> \n                            <DoneIcon style={{marginRight: '1rem'}}/>\n                            <Typography variant=\"body2\">You have already submitted a daily enrollment update for <b>{new Date().toLocaleDateString()}</b>. You can update it by tapping update below.</Typography>\n                        </Box>\n                }\n            </CardContent>\n            <Divider/>\n            <List component=\"nav\" aria-label=\"main mailbox folders\">\n                { record\n                    ?   <ListItem button onClick={(e) => {history.push(`/dailyactivity/edit/${record.id}/`)}} >\n                            <ListItemIcon>\n                                <EditIcon />\n                            </ListItemIcon>\n                            <ListItemText primary=\"Update Daily Report\" />\n                        </ListItem>\n                    :   <ListItem button onClick={(e) => {history.push('/dailyactivity/add/')}} >\n                            <ListItemIcon>\n                                <AddCircleIcon />\n                            </ListItemIcon>\n                            <ListItemText primary='Submit Daily Report' />\n                        </ListItem>\n                }\n            </List>\n        </Card>\n    )\n}\n","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/Components/ConfirmationDialogProvider.js",[],"/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/Components/LoadingButton.js",[],"/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/pages/Home/RecentNotification.js",["350","351","352","353","354","355","356"],"import React, { useState } from \"react\";\n\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport Card from \"@material-ui/core/Card\";\nimport CardActions from \"@material-ui/core/CardActions\";\nimport CardContent from \"@material-ui/core/CardContent\";\nimport Button from \"@material-ui/core/Button\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Typography from \"@material-ui/core/Typography\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport NotificationsActiveIcon from \"@material-ui/icons/NotificationsActive\";\nimport ArrowForwardIosIcon from \"@material-ui/icons/ArrowForwardIos\";\nimport PeakPwa from \"./../../services/peakpwa\";\nimport { useHistory } from \"react-router\";\nimport { Avatar, Box, IconButton } from \"@material-ui/core\";\n\nconst useStyles = makeStyles((theme) => ({\n  root: {\n    // maxWidth: 345,\n    // backgroundColor: '#',\n    marginBottom: \"1rem\",\n  },\n  media: {\n    // height: 140,\n  },\n}));\n\nexport default function RecentNotification() {\n  const classes = useStyles();\n  const [isLoading, setLoading] = useState(false);\n  const [notif, setNotif] = useState(null);\n\n  let history = useHistory();\n\n  React.useEffect(async () => {\n    console.log(\"useEffect\");\n    let notifs = await PeakPwa.webapp.getNotifications(true);\n    console.log(notifs);\n    setNotif(notifs[0]);\n  }, []);\n\n  React.useEffect(async () => {\n    navigator.serviceWorker.addEventListener(\"message\", async (e) => {\n      console.log(\"handlePushReceived - RecentNotification\");\n      console.log(e.data);\n      let notifs = await PeakPwa.webapp.getNotifications(true);\n      console.log(notifs);\n      setNotif(notifs[0]);\n    });\n  }, []);\n\n  //   const handleClick = (e) => {\n  //     setLoading(true);\n  //     PeakPwa.requestNotificationPermissionAndSubscribe();\n  //   }\n\n  return (\n    <div>\n      {notif ? (\n        <Card className={classes.root}>\n          <Box bgcolor=\"success.main\" color=\"primary.contrastText\">\n            <CardContent>\n              {/* <Typography gutterBottom variant=\"h6\">\n                  Push Notification\n              </Typography> */}\n              <Grid container spacing={3}>\n                <Grid item xs={2}>\n                  <Avatar style={{ color: \"white\" }}>\n                    <NotificationsActiveIcon color=\"inherit\" />\n                  </Avatar>\n                </Grid>\n                <Grid item xs={8}>\n                  <Typography variant=\"body1\" component=\"p\">\n                    {notif.changeTitle}\n                  </Typography>\n                  <Typography variant=\"body2\" component=\"p\">\n                    {notif.changeMessage}\n                  </Typography>\n                </Grid>\n                <Grid item xs={2}>\n                  <IconButton\n                    size=\"small\"\n                    color=\"inherit\"\n                    onClick={() => {\n                      history.push(\"/notifications/\");\n                    }}>\n                    <ArrowForwardIosIcon />\n                  </IconButton>\n                </Grid>\n              </Grid>\n            </CardContent>\n          </Box>\n        </Card>\n      ) : (\n        \"\"\n      )}\n    </div>\n  );\n}\n","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/pages/NotificationPage/NotificationContainer.js",["357","358","359","360"],"/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/pages/Login/ChangePasswordForm.js",["361","362","363","364","365","366","367","368","369","370","371"],"import React from \"react\";\nimport Container from \"@material-ui/core/Container\";\nimport Typography from \"@material-ui/core/Typography\";\nimport TextField from \"@material-ui/core/TextField\";\nimport Grid from \"@material-ui/core/Grid\";\nimport Paper from \"@material-ui/core/Paper\";\nimport Button from \"@material-ui/core/Button\";\nimport Alert from \"@material-ui/lab/Alert\";\nimport CircularProgress from \"@material-ui/core/CircularProgress\";\nimport logo from \"./../../logo.png\";\n\nimport AuthService from \"./../../services/auth-service\";\n\nimport LoadingButton from \"./../../Components/LoadingButton\";\nimport Constants from \"../../constants\";\nimport { fetchData, getQueryParam } from \"./../../helpers/helpers\";\nimport { Box } from \"@material-ui/core\";\nimport { useHistory } from \"react-router\";\nimport { Switch, Route } from \"react-router-dom\";\n\nimport FormContainer from \"./../../Components/FormContainer\";\n\nexport default function ChangePasswordForm({}) {\n  let history = useHistory();\n  const [isSuccess, setSuccess] = React.useState(null);\n  const [formError, setFormError] = React.useState({});\n  const [state, setState] = React.useState({\n    general_error: \"\",\n    isLoading: false,\n  });\n\n  const [old_password, setOldPassword] = React.useState(\"\");\n  const [new_password, setNewPassword] = React.useState(\"\");\n  const [new_password2, setNewPassword2] = React.useState(\"\");\n\n  const handleSubmit = async function (e) {\n    e.preventDefault();\n    if (!window.navigator.onLine) {\n      this.setState({\n        general_error:\n          \"You are currently offline. Please connect to the internet to perform this action.\",\n        isLoading: false,\n      });\n      return;\n    }\n    if (new_password !== new_password2) {\n      setState({\n        general_error: \"The 2 enetered passwords do not match.\",\n        isLoading: false,\n      });\n      return;\n    }\n    setState({\n      general_error: \"\",\n      isLoading: true,\n    });\n\n    try {\n      await fetchData(\n        \"PUT\",\n        `${Constants.domain}/api/update_password/?self=true`,\n        {\n          old_password: old_password,\n          new_password: new_password,\n          //   send_sms: true,\n        }\n      );\n      setSuccess(true);\n      // let {user_data, state_data} = await AuthService.auth(this.state.username, this.state.password)\n      // onLoginSuccess(user_data, state_data);\n    } catch (err) {\n      //   console.log(err);\n      setFormError(err.response);\n      setState({\n        isLoading: false,\n      });\n      for (const key in err.response) {\n        // setState({\n        // \tgeneral_error: err.response[key],\n        // \tisLoading: false,\n        // });\n        if (key == \"non_field_errors\" || key == \"detail\") {\n          setState({\n            general_error: err.response[key],\n            isLoading: false,\n          });\n        }\n      }\n    }\n  };\n\n  return (\n    <FormContainer>\n      {isSuccess ? (\n        <Box>\n          <Typography>Your password has been updated successfully</Typography>\n\n          <Button\n            style={{ marginTop: \"1rem\" }}\n            onClick={() => {\n              history.push(\"/\");\n            }}\n            color=\"secondary\"\n            variant=\"text\">\n            Return to Home\n          </Button>\n        </Box>\n      ) : (\n        <form\n          className=\"password-reset-req-form\"\n          autoComplete=\"off\"\n          onSubmit={handleSubmit}>\n          <Grid container spacing={3}>\n            <Grid item xs={12}>\n              <Box textAlign=\"left\">\n                <Typography variant=\"body1\" color=\"textSecondary\">\n                  Enter your old and new password below to update it.\n                </Typography>\n              </Box>\n            </Grid>\n\n            {state.general_error ? (\n              <Grid item xs={12}>\n                <Alert severity=\"error\">{state.general_error}</Alert>\n              </Grid>\n            ) : (\n              \"\"\n            )}\n            <Grid item xs={12}>\n              <TextField\n                fullWidth\n                name=\"old_password\"\n                label=\"Password\"\n                variant=\"outlined\"\n                type=\"password\"\n                error={Boolean(formError.old_password)}\n                helperText={\n                  formError.old_password\n                    ? formError.old_password.join(\"\\r\\n\")\n                    : \"\"\n                }\n                value={old_password}\n                onChange={(event) => setOldPassword(event.target.value)}\n                disabled={state.isLoading}\n                required\n              />\n            </Grid>\n            <Grid item xs={12}>\n              <TextField\n                fullWidth\n                name=\"new_password\"\n                type=\"password\"\n                label=\"New Password\"\n                variant=\"outlined\"\n                value={new_password}\n                onChange={(event) => setNewPassword(event.target.value)}\n                disabled={state.isLoading}\n                error={Boolean(formError.new_password)}\n                helperText={\n                  formError.new_password\n                    ? formError.new_password.join(\"\\r\\n\")\n                    : \"\"\n                }\n                required\n              />\n            </Grid>\n            <Grid item xs={12}>\n              <TextField\n                fullWidth\n                name=\"new_password\"\n                type=\"password\"\n                label=\"Repeat New Password\"\n                variant=\"outlined\"\n                value={new_password2}\n                onChange={(event) => setNewPassword2(event.target.value)}\n                disabled={state.isLoading}\n                required\n              />\n            </Grid>\n            <Grid item xs={12}>\n              <LoadingButton\n                btnText=\"Update Password\"\n                loadingText=\"Updating Password\"\n                isLoading={state.isLoading}\n                color=\"secondary\"\n                fullWidth\n                type=\"submit\"\n                variant=\"contained\"\n                size=\"large\"\n              />\n              <Button\n                style={{ marginTop: \"1rem\" }}\n                onClick={() => {\n                  history.push(\"/\");\n                }}\n                color=\"secondary\"\n                variant=\"text\">\n                Return to Home\n              </Button>\n            </Grid>\n          </Grid>\n        </form>\n      )}\n    </FormContainer>\n  );\n}\n","/Users/gaurav/Work/hdfc-adhaar-app/hdfc-aadhaar/src/service-worker.js",[],{"ruleId":"372","replacedBy":"373"},{"ruleId":"374","replacedBy":"375"},{"ruleId":"376","severity":1,"message":"377","line":33,"column":7,"nodeType":"378","messageId":"379","endLine":37,"endColumn":8},{"ruleId":"380","severity":1,"message":"381","line":7,"column":8,"nodeType":"382","messageId":"383","endLine":7,"endColumn":16},{"ruleId":"380","severity":1,"message":"384","line":23,"column":8,"nodeType":"382","messageId":"383","endLine":23,"endColumn":17},{"ruleId":"385","severity":1,"message":"386","line":56,"column":39,"nodeType":"387","messageId":"388","endLine":56,"endColumn":41},{"ruleId":"389","severity":1,"message":"390","line":58,"column":6,"nodeType":"391","endLine":58,"endColumn":8,"suggestions":"392"},{"ruleId":"393","severity":1,"message":"394","line":68,"column":15,"nodeType":"395","endLine":68,"endColumn":128},{"ruleId":"389","severity":1,"message":"390","line":34,"column":6,"nodeType":"391","endLine":34,"endColumn":8,"suggestions":"396"},{"ruleId":"397","severity":1,"message":"398","line":9,"column":2,"nodeType":"399","messageId":"400","endLine":9,"endColumn":15,"fix":"401"},{"ruleId":"402","severity":1,"message":"403","line":12,"column":58,"nodeType":"387","messageId":"404","endLine":12,"endColumn":59},{"ruleId":"380","severity":1,"message":"405","line":13,"column":6,"nodeType":"382","messageId":"383","endLine":13,"endColumn":25},{"ruleId":"402","severity":1,"message":"403","line":13,"column":52,"nodeType":"387","messageId":"404","endLine":13,"endColumn":53},{"ruleId":"402","severity":1,"message":"403","line":14,"column":59,"nodeType":"387","messageId":"404","endLine":14,"endColumn":60},{"ruleId":"380","severity":1,"message":"406","line":83,"column":7,"nodeType":"382","messageId":"383","endLine":83,"endColumn":19},{"ruleId":"385","severity":1,"message":"386","line":85,"column":52,"nodeType":"387","messageId":"388","endLine":85,"endColumn":54},{"ruleId":"385","severity":1,"message":"386","line":95,"column":28,"nodeType":"387","messageId":"388","endLine":95,"endColumn":30},{"ruleId":"385","severity":1,"message":"407","line":116,"column":21,"nodeType":"387","messageId":"388","endLine":116,"endColumn":23},{"ruleId":"385","severity":1,"message":"386","line":148,"column":42,"nodeType":"387","messageId":"388","endLine":148,"endColumn":44},{"ruleId":"385","severity":1,"message":"386","line":160,"column":33,"nodeType":"387","messageId":"388","endLine":160,"endColumn":35},{"ruleId":"385","severity":1,"message":"386","line":178,"column":25,"nodeType":"387","messageId":"388","endLine":178,"endColumn":27},{"ruleId":"385","severity":1,"message":"386","line":239,"column":23,"nodeType":"387","messageId":"388","endLine":239,"endColumn":25},{"ruleId":"408","severity":1,"message":"409","line":335,"column":14,"nodeType":"410","messageId":"411","endLine":335,"endColumn":15,"suggestions":"412"},{"ruleId":"385","severity":1,"message":"386","line":355,"column":19,"nodeType":"387","messageId":"388","endLine":355,"endColumn":21},{"ruleId":"380","severity":1,"message":"413","line":378,"column":4,"nodeType":"382","messageId":"383","endLine":378,"endColumn":15},{"ruleId":"385","severity":1,"message":"386","line":408,"column":11,"nodeType":"387","messageId":"388","endLine":408,"endColumn":13},{"ruleId":"414","severity":1,"message":"415","line":408,"column":27,"nodeType":"387","messageId":"416","endLine":408,"endColumn":28},{"ruleId":"414","severity":1,"message":"415","line":408,"column":33,"nodeType":"387","messageId":"416","endLine":408,"endColumn":34},{"ruleId":"385","severity":1,"message":"386","line":452,"column":23,"nodeType":"387","messageId":"388","endLine":452,"endColumn":25},{"ruleId":"417","severity":1,"message":"418","line":515,"column":14,"nodeType":"382","messageId":"419","endLine":515,"endColumn":17},{"ruleId":"385","severity":1,"message":"386","line":845,"column":34,"nodeType":"387","messageId":"388","endLine":845,"endColumn":36},{"ruleId":"380","severity":1,"message":"420","line":852,"column":7,"nodeType":"382","messageId":"383","endLine":852,"endColumn":20},{"ruleId":"385","severity":1,"message":"386","line":869,"column":30,"nodeType":"387","messageId":"388","endLine":869,"endColumn":32},{"ruleId":"385","severity":1,"message":"386","line":889,"column":33,"nodeType":"387","messageId":"388","endLine":889,"endColumn":35},{"ruleId":"380","severity":1,"message":"421","line":910,"column":7,"nodeType":"382","messageId":"383","endLine":910,"endColumn":16},{"ruleId":"385","severity":1,"message":"407","line":1050,"column":30,"nodeType":"387","messageId":"388","endLine":1050,"endColumn":32},{"ruleId":"385","severity":1,"message":"386","line":1079,"column":90,"nodeType":"387","messageId":"388","endLine":1079,"endColumn":92},{"ruleId":"385","severity":1,"message":"407","line":1136,"column":20,"nodeType":"387","messageId":"388","endLine":1136,"endColumn":22},{"ruleId":"385","severity":1,"message":"407","line":1138,"column":35,"nodeType":"387","messageId":"388","endLine":1138,"endColumn":37},{"ruleId":"385","severity":1,"message":"386","line":1141,"column":15,"nodeType":"387","messageId":"388","endLine":1141,"endColumn":17},{"ruleId":"385","severity":1,"message":"386","line":1141,"column":64,"nodeType":"387","messageId":"388","endLine":1141,"endColumn":66},{"ruleId":"380","severity":1,"message":"422","line":1151,"column":7,"nodeType":"382","messageId":"383","endLine":1151,"endColumn":15},{"ruleId":"380","severity":1,"message":"423","line":1200,"column":7,"nodeType":"382","messageId":"383","endLine":1200,"endColumn":15},{"ruleId":"385","severity":1,"message":"386","line":1212,"column":23,"nodeType":"387","messageId":"388","endLine":1212,"endColumn":25},{"ruleId":"417","severity":1,"message":"424","line":1221,"column":12,"nodeType":"382","messageId":"419","endLine":1221,"endColumn":13},{"ruleId":"385","severity":1,"message":"386","line":1259,"column":56,"nodeType":"387","messageId":"388","endLine":1259,"endColumn":58},{"ruleId":"385","severity":1,"message":"386","line":1273,"column":17,"nodeType":"387","messageId":"388","endLine":1273,"endColumn":19},{"ruleId":"385","severity":1,"message":"386","line":1274,"column":15,"nodeType":"387","messageId":"388","endLine":1274,"endColumn":17},{"ruleId":"385","severity":1,"message":"386","line":1322,"column":19,"nodeType":"387","messageId":"388","endLine":1322,"endColumn":21},{"ruleId":"385","severity":1,"message":"386","line":1378,"column":22,"nodeType":"387","messageId":"388","endLine":1378,"endColumn":24},{"ruleId":"380","severity":1,"message":"425","line":1404,"column":13,"nodeType":"382","messageId":"383","endLine":1404,"endColumn":16},{"ruleId":"385","severity":1,"message":"407","line":1418,"column":29,"nodeType":"387","messageId":"388","endLine":1418,"endColumn":31},{"ruleId":"385","severity":1,"message":"407","line":1427,"column":29,"nodeType":"387","messageId":"388","endLine":1427,"endColumn":31},{"ruleId":"385","severity":1,"message":"386","line":1485,"column":52,"nodeType":"387","messageId":"388","endLine":1485,"endColumn":54},{"ruleId":"372","replacedBy":"426"},{"ruleId":"374","replacedBy":"427"},{"ruleId":"380","severity":1,"message":"428","line":2,"column":8,"nodeType":"382","messageId":"383","endLine":2,"endColumn":12},{"ruleId":"380","severity":1,"message":"429","line":5,"column":8,"nodeType":"382","messageId":"383","endLine":5,"endColumn":18},{"ruleId":"380","severity":1,"message":"430","line":6,"column":10,"nodeType":"382","messageId":"383","endLine":6,"endColumn":16},{"ruleId":"380","severity":1,"message":"431","line":6,"column":18,"nodeType":"382","messageId":"383","endLine":6,"endColumn":23},{"ruleId":"385","severity":1,"message":"386","line":24,"column":52,"nodeType":"387","messageId":"388","endLine":24,"endColumn":54},{"ruleId":"385","severity":1,"message":"386","line":45,"column":52,"nodeType":"387","messageId":"388","endLine":45,"endColumn":54},{"ruleId":"385","severity":1,"message":"386","line":52,"column":22,"nodeType":"387","messageId":"388","endLine":52,"endColumn":24},{"ruleId":"380","severity":1,"message":"432","line":9,"column":8,"nodeType":"382","messageId":"383","endLine":9,"endColumn":24},{"ruleId":"380","severity":1,"message":"428","line":10,"column":8,"nodeType":"382","messageId":"383","endLine":10,"endColumn":12},{"ruleId":"385","severity":1,"message":"386","line":97,"column":17,"nodeType":"387","messageId":"388","endLine":97,"endColumn":19},{"ruleId":"385","severity":1,"message":"386","line":97,"column":46,"nodeType":"387","messageId":"388","endLine":97,"endColumn":48},{"ruleId":"433","severity":1,"message":"434","line":172,"column":35,"nodeType":"435","messageId":"388","endLine":172,"endColumn":37},{"ruleId":"380","severity":1,"message":"436","line":198,"column":11,"nodeType":"382","messageId":"383","endLine":198,"endColumn":15},{"ruleId":"385","severity":1,"message":"386","line":215,"column":17,"nodeType":"387","messageId":"388","endLine":215,"endColumn":19},{"ruleId":"385","severity":1,"message":"386","line":215,"column":46,"nodeType":"387","messageId":"388","endLine":215,"endColumn":48},{"ruleId":"433","severity":1,"message":"434","line":303,"column":35,"nodeType":"435","messageId":"388","endLine":303,"endColumn":37},{"ruleId":"385","severity":1,"message":"386","line":352,"column":17,"nodeType":"387","messageId":"388","endLine":352,"endColumn":19},{"ruleId":"385","severity":1,"message":"386","line":352,"column":46,"nodeType":"387","messageId":"388","endLine":352,"endColumn":48},{"ruleId":"380","severity":1,"message":"437","line":3,"column":8,"nodeType":"382","messageId":"383","endLine":3,"endColumn":17},{"ruleId":"380","severity":1,"message":"438","line":13,"column":8,"nodeType":"382","messageId":"383","endLine":13,"endColumn":25},{"ruleId":"380","severity":1,"message":"439","line":11,"column":8,"nodeType":"382","messageId":"383","endLine":11,"endColumn":20},{"ruleId":"380","severity":1,"message":"440","line":12,"column":8,"nodeType":"382","messageId":"383","endLine":12,"endColumn":20},{"ruleId":"385","severity":1,"message":"386","line":45,"column":23,"nodeType":"387","messageId":"388","endLine":45,"endColumn":25},{"ruleId":"385","severity":1,"message":"386","line":45,"column":59,"nodeType":"387","messageId":"388","endLine":45,"endColumn":61},{"ruleId":"380","severity":1,"message":"441","line":70,"column":9,"nodeType":"382","messageId":"383","endLine":70,"endColumn":19},{"ruleId":"380","severity":1,"message":"442","line":1,"column":17,"nodeType":"382","messageId":"383","endLine":1,"endColumn":25},{"ruleId":"380","severity":1,"message":"443","line":8,"column":8,"nodeType":"382","messageId":"383","endLine":8,"endColumn":21},{"ruleId":"380","severity":1,"message":"444","line":10,"column":8,"nodeType":"382","messageId":"383","endLine":10,"endColumn":15},{"ruleId":"380","severity":1,"message":"445","line":13,"column":8,"nodeType":"382","messageId":"383","endLine":13,"endColumn":20},{"ruleId":"380","severity":1,"message":"446","line":4,"column":8,"nodeType":"382","messageId":"383","endLine":4,"endColumn":12},{"ruleId":"380","severity":1,"message":"447","line":5,"column":8,"nodeType":"382","messageId":"383","endLine":5,"endColumn":19},{"ruleId":"380","severity":1,"message":"448","line":6,"column":8,"nodeType":"382","messageId":"383","endLine":6,"endColumn":19},{"ruleId":"380","severity":1,"message":"430","line":7,"column":8,"nodeType":"382","messageId":"383","endLine":7,"endColumn":14},{"ruleId":"380","severity":1,"message":"437","line":10,"column":8,"nodeType":"382","messageId":"383","endLine":10,"endColumn":17},{"ruleId":"380","severity":1,"message":"449","line":12,"column":8,"nodeType":"382","messageId":"383","endLine":12,"endColumn":11},{"ruleId":"380","severity":1,"message":"432","line":14,"column":8,"nodeType":"382","messageId":"383","endLine":14,"endColumn":24},{"ruleId":"380","severity":1,"message":"450","line":15,"column":8,"nodeType":"382","messageId":"383","endLine":15,"endColumn":31},{"ruleId":"380","severity":1,"message":"451","line":18,"column":8,"nodeType":"382","messageId":"383","endLine":18,"endColumn":15},{"ruleId":"380","severity":1,"message":"452","line":33,"column":10,"nodeType":"382","messageId":"383","endLine":33,"endColumn":19},{"ruleId":"380","severity":1,"message":"453","line":35,"column":9,"nodeType":"382","messageId":"383","endLine":35,"endColumn":20},{"ruleId":"380","severity":1,"message":"437","line":3,"column":8,"nodeType":"382","messageId":"383","endLine":3,"endColumn":17},{"ruleId":"380","severity":1,"message":"430","line":7,"column":8,"nodeType":"382","messageId":"383","endLine":7,"endColumn":14},{"ruleId":"380","severity":1,"message":"432","line":9,"column":8,"nodeType":"382","messageId":"383","endLine":9,"endColumn":24},{"ruleId":"385","severity":1,"message":"386","line":72,"column":12,"nodeType":"387","messageId":"388","endLine":72,"endColumn":14},{"ruleId":"385","severity":1,"message":"386","line":72,"column":41,"nodeType":"387","messageId":"388","endLine":72,"endColumn":43},{"ruleId":"380","severity":1,"message":"446","line":3,"column":22,"nodeType":"382","messageId":"383","endLine":3,"endColumn":26},{"ruleId":"380","severity":1,"message":"447","line":3,"column":28,"nodeType":"382","messageId":"383","endLine":3,"endColumn":39},{"ruleId":"380","severity":1,"message":"448","line":3,"column":41,"nodeType":"382","messageId":"383","endLine":3,"endColumn":52},{"ruleId":"380","severity":1,"message":"431","line":3,"column":60,"nodeType":"382","messageId":"383","endLine":3,"endColumn":65},{"ruleId":"380","severity":1,"message":"439","line":25,"column":8,"nodeType":"382","messageId":"383","endLine":25,"endColumn":20},{"ruleId":"380","severity":1,"message":"440","line":26,"column":8,"nodeType":"382","messageId":"383","endLine":26,"endColumn":20},{"ruleId":"380","severity":1,"message":"454","line":31,"column":8,"nodeType":"382","messageId":"383","endLine":31,"endColumn":21},{"ruleId":"380","severity":1,"message":"455","line":40,"column":9,"nodeType":"382","messageId":"383","endLine":40,"endColumn":20},{"ruleId":"380","severity":1,"message":"456","line":40,"column":22,"nodeType":"382","messageId":"383","endLine":40,"endColumn":36},{"ruleId":"380","severity":1,"message":"457","line":45,"column":26,"nodeType":"382","messageId":"383","endLine":45,"endColumn":39},{"ruleId":"389","severity":1,"message":"458","line":67,"column":5,"nodeType":"391","endLine":67,"endColumn":19,"suggestions":"459"},{"ruleId":"385","severity":1,"message":"386","line":223,"column":23,"nodeType":"387","messageId":"388","endLine":223,"endColumn":25},{"ruleId":"380","severity":1,"message":"437","line":2,"column":8,"nodeType":"382","messageId":"383","endLine":2,"endColumn":17},{"ruleId":"380","severity":1,"message":"437","line":3,"column":8,"nodeType":"382","messageId":"383","endLine":3,"endColumn":17},{"ruleId":"380","severity":1,"message":"430","line":6,"column":8,"nodeType":"382","messageId":"383","endLine":6,"endColumn":14},{"ruleId":"380","severity":1,"message":"432","line":8,"column":8,"nodeType":"382","messageId":"383","endLine":8,"endColumn":24},{"ruleId":"380","severity":1,"message":"460","line":15,"column":9,"nodeType":"382","messageId":"383","endLine":15,"endColumn":18},{"ruleId":"380","severity":1,"message":"384","line":20,"column":8,"nodeType":"382","messageId":"383","endLine":20,"endColumn":17},{"ruleId":"385","severity":1,"message":"386","line":81,"column":13,"nodeType":"387","messageId":"388","endLine":81,"endColumn":15},{"ruleId":"385","severity":1,"message":"386","line":81,"column":42,"nodeType":"387","messageId":"388","endLine":81,"endColumn":44},{"ruleId":"380","severity":1,"message":"430","line":2,"column":8,"nodeType":"382","messageId":"383","endLine":2,"endColumn":14},{"ruleId":"380","severity":1,"message":"461","line":32,"column":22,"nodeType":"382","messageId":"383","endLine":32,"endColumn":36},{"ruleId":"380","severity":1,"message":"457","line":36,"column":26,"nodeType":"382","messageId":"383","endLine":36,"endColumn":39},{"ruleId":"389","severity":1,"message":"462","line":38,"column":12,"nodeType":"463","endLine":48,"endColumn":3},{"ruleId":"385","severity":1,"message":"386","line":167,"column":23,"nodeType":"387","messageId":"388","endLine":167,"endColumn":25},{"ruleId":"380","severity":1,"message":"437","line":2,"column":8,"nodeType":"382","messageId":"383","endLine":2,"endColumn":17},{"ruleId":"380","severity":1,"message":"464","line":8,"column":8,"nodeType":"382","messageId":"383","endLine":8,"endColumn":25},{"ruleId":"380","severity":1,"message":"437","line":2,"column":8,"nodeType":"382","messageId":"383","endLine":2,"endColumn":17},{"ruleId":"380","severity":1,"message":"430","line":6,"column":8,"nodeType":"382","messageId":"383","endLine":6,"endColumn":14},{"ruleId":"380","severity":1,"message":"432","line":8,"column":8,"nodeType":"382","messageId":"383","endLine":8,"endColumn":24},{"ruleId":"385","severity":1,"message":"386","line":88,"column":13,"nodeType":"387","messageId":"388","endLine":88,"endColumn":15},{"ruleId":"385","severity":1,"message":"386","line":88,"column":42,"nodeType":"387","messageId":"388","endLine":88,"endColumn":44},{"ruleId":"380","severity":1,"message":"437","line":3,"column":8,"nodeType":"382","messageId":"383","endLine":3,"endColumn":17},{"ruleId":"380","severity":1,"message":"430","line":3,"column":8,"nodeType":"382","messageId":"383","endLine":3,"endColumn":14},{"ruleId":"380","severity":1,"message":"446","line":5,"column":8,"nodeType":"382","messageId":"383","endLine":5,"endColumn":12},{"ruleId":"380","severity":1,"message":"431","line":8,"column":8,"nodeType":"382","messageId":"383","endLine":8,"endColumn":13},{"ruleId":"380","severity":1,"message":"465","line":30,"column":9,"nodeType":"382","messageId":"383","endLine":30,"endColumn":20},{"ruleId":"380","severity":1,"message":"461","line":30,"column":22,"nodeType":"382","messageId":"383","endLine":30,"endColumn":36},{"ruleId":"380","severity":1,"message":"457","line":32,"column":26,"nodeType":"382","messageId":"383","endLine":32,"endColumn":39},{"ruleId":"385","severity":1,"message":"386","line":180,"column":23,"nodeType":"387","messageId":"388","endLine":180,"endColumn":25},{"ruleId":"380","severity":1,"message":"437","line":3,"column":8,"nodeType":"382","messageId":"383","endLine":3,"endColumn":17},{"ruleId":"380","severity":1,"message":"430","line":6,"column":8,"nodeType":"382","messageId":"383","endLine":6,"endColumn":14},{"ruleId":"380","severity":1,"message":"432","line":8,"column":8,"nodeType":"382","messageId":"383","endLine":8,"endColumn":24},{"ruleId":"385","severity":1,"message":"386","line":87,"column":13,"nodeType":"387","messageId":"388","endLine":87,"endColumn":15},{"ruleId":"385","severity":1,"message":"386","line":87,"column":42,"nodeType":"387","messageId":"388","endLine":87,"endColumn":44},{"ruleId":"380","severity":1,"message":"460","line":2,"column":10,"nodeType":"382","messageId":"383","endLine":2,"endColumn":19},{"ruleId":"380","severity":1,"message":"466","line":6,"column":8,"nodeType":"382","messageId":"383","endLine":6,"endColumn":13},{"ruleId":"385","severity":1,"message":"386","line":32,"column":28,"nodeType":"387","messageId":"388","endLine":32,"endColumn":30},{"ruleId":"385","severity":1,"message":"386","line":39,"column":20,"nodeType":"387","messageId":"388","endLine":39,"endColumn":22},{"ruleId":"385","severity":1,"message":"386","line":95,"column":26,"nodeType":"387","messageId":"388","endLine":95,"endColumn":28},{"ruleId":"385","severity":1,"message":"386","line":107,"column":26,"nodeType":"387","messageId":"388","endLine":107,"endColumn":28},{"ruleId":"385","severity":1,"message":"386","line":123,"column":62,"nodeType":"387","messageId":"388","endLine":123,"endColumn":64},{"ruleId":"385","severity":1,"message":"386","line":133,"column":29,"nodeType":"387","messageId":"388","endLine":133,"endColumn":31},{"ruleId":"380","severity":1,"message":"422","line":157,"column":9,"nodeType":"382","messageId":"383","endLine":157,"endColumn":17},{"ruleId":"385","severity":1,"message":"386","line":170,"column":43,"nodeType":"387","messageId":"388","endLine":170,"endColumn":45},{"ruleId":"380","severity":1,"message":"430","line":5,"column":8,"nodeType":"382","messageId":"383","endLine":5,"endColumn":14},{"ruleId":"380","severity":1,"message":"467","line":7,"column":8,"nodeType":"382","messageId":"383","endLine":7,"endColumn":22},{"ruleId":"380","severity":1,"message":"447","line":8,"column":8,"nodeType":"382","messageId":"383","endLine":8,"endColumn":19},{"ruleId":"380","severity":1,"message":"443","line":15,"column":8,"nodeType":"382","messageId":"383","endLine":15,"endColumn":21},{"ruleId":"380","severity":1,"message":"468","line":22,"column":8,"nodeType":"382","messageId":"383","endLine":22,"endColumn":23},{"ruleId":"380","severity":1,"message":"469","line":43,"column":9,"nodeType":"382","messageId":"383","endLine":43,"endColumn":13},{"ruleId":"380","severity":1,"message":"470","line":43,"column":15,"nodeType":"382","messageId":"383","endLine":43,"endColumn":22},{"ruleId":"380","severity":1,"message":"457","line":48,"column":26,"nodeType":"382","messageId":"383","endLine":48,"endColumn":39},{"ruleId":"389","severity":1,"message":"462","line":53,"column":12,"nodeType":"463","endLine":56,"endColumn":3},{"ruleId":"380","severity":1,"message":"432","line":20,"column":8,"nodeType":"382","messageId":"383","endLine":20,"endColumn":24},{"ruleId":"380","severity":1,"message":"469","line":38,"column":12,"nodeType":"382","messageId":"383","endLine":38,"endColumn":16},{"ruleId":"380","severity":1,"message":"470","line":38,"column":18,"nodeType":"382","messageId":"383","endLine":38,"endColumn":25},{"ruleId":"380","severity":1,"message":"465","line":39,"column":12,"nodeType":"382","messageId":"383","endLine":39,"endColumn":23},{"ruleId":"380","severity":1,"message":"461","line":39,"column":25,"nodeType":"382","messageId":"383","endLine":39,"endColumn":39},{"ruleId":"389","severity":1,"message":"462","line":47,"column":15,"nodeType":"463","endLine":50,"endColumn":6},{"ruleId":"380","severity":1,"message":"447","line":5,"column":8,"nodeType":"382","messageId":"383","endLine":5,"endColumn":19},{"ruleId":"380","severity":1,"message":"430","line":7,"column":8,"nodeType":"382","messageId":"383","endLine":7,"endColumn":14},{"ruleId":"380","severity":1,"message":"432","line":10,"column":8,"nodeType":"382","messageId":"383","endLine":10,"endColumn":24},{"ruleId":"380","severity":1,"message":"452","line":30,"column":10,"nodeType":"382","messageId":"383","endLine":30,"endColumn":19},{"ruleId":"380","severity":1,"message":"471","line":30,"column":21,"nodeType":"382","messageId":"383","endLine":30,"endColumn":31},{"ruleId":"389","severity":1,"message":"462","line":35,"column":19,"nodeType":"463","endLine":40,"endColumn":4},{"ruleId":"389","severity":1,"message":"462","line":42,"column":19,"nodeType":"463","endLine":50,"endColumn":4},{"ruleId":"385","severity":1,"message":"386","line":11,"column":49,"nodeType":"387","messageId":"388","endLine":11,"endColumn":51},{"ruleId":"385","severity":1,"message":"386","line":49,"column":49,"nodeType":"387","messageId":"388","endLine":49,"endColumn":51},{"ruleId":"385","severity":1,"message":"386","line":54,"column":21,"nodeType":"387","messageId":"388","endLine":54,"endColumn":23},{"ruleId":"380","severity":1,"message":"472","line":62,"column":7,"nodeType":"382","messageId":"383","endLine":62,"endColumn":10},{"ruleId":"380","severity":1,"message":"437","line":2,"column":8,"nodeType":"382","messageId":"383","endLine":2,"endColumn":17},{"ruleId":"380","severity":1,"message":"431","line":6,"column":8,"nodeType":"382","messageId":"383","endLine":6,"endColumn":13},{"ruleId":"380","severity":1,"message":"432","line":9,"column":8,"nodeType":"382","messageId":"383","endLine":9,"endColumn":24},{"ruleId":"380","severity":1,"message":"428","line":10,"column":8,"nodeType":"382","messageId":"383","endLine":10,"endColumn":12},{"ruleId":"380","severity":1,"message":"473","line":12,"column":8,"nodeType":"382","messageId":"383","endLine":12,"endColumn":19},{"ruleId":"380","severity":1,"message":"474","line":16,"column":21,"nodeType":"382","messageId":"383","endLine":16,"endColumn":34},{"ruleId":"380","severity":1,"message":"475","line":19,"column":10,"nodeType":"382","messageId":"383","endLine":19,"endColumn":16},{"ruleId":"380","severity":1,"message":"476","line":19,"column":18,"nodeType":"382","messageId":"383","endLine":19,"endColumn":23},{"ruleId":"433","severity":1,"message":"434","line":23,"column":44,"nodeType":"435","messageId":"388","endLine":23,"endColumn":46},{"ruleId":"385","severity":1,"message":"386","line":82,"column":17,"nodeType":"387","messageId":"388","endLine":82,"endColumn":19},{"ruleId":"385","severity":1,"message":"386","line":82,"column":46,"nodeType":"387","messageId":"388","endLine":82,"endColumn":48},"no-native-reassign",["477"],"no-negated-in-lhs",["478"],"no-throw-literal","Expected an error object to be thrown.","ThrowStatement","object","no-unused-vars","'MenuIcon' is defined but never used.","Identifier","unusedVar","'Constants' is defined but never used.","eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","react-hooks/exhaustive-deps","React Hook React.useEffect has a missing dependency: 'history'. Either include it or remove the dependency array.","ArrayExpression",["479"],"jsx-a11y/alt-text","img elements must have an alt prop, either with meaningful text, or an empty string for decorative images.","JSXOpeningElement",["480"],"strict","'use strict' is unnecessary inside of modules.","ExpressionStatement","module",{"range":"481","text":"482"},"no-useless-concat","Unexpected string concatenation of literals.","unexpectedConcat","'LS_USER_PERM_STATUS' is assigned a value but never used.","'isSubscribed' is assigned a value but never used.","Expected '!==' and instead saw '!='.","no-useless-escape","Unnecessary escape character: \\-.","Literal","unnecessaryEscape",["483","484"],"'addedToHome' is assigned a value but never used.","no-mixed-operators","Unexpected mix of '&' and '|'.","unexpectedMixedOperator","no-redeclare","'key' is already defined.","redeclared","'userSubStatus' is assigned a value but never used.","'webPushId' is assigned a value but never used.","'response' is assigned a value but never used.","'serialno' is assigned a value but never used.","'i' is already defined.","'key' is assigned a value but never used.",["477"],["478"],"'logo' is defined but never used.","'Typography' is defined but never used.","'Button' is defined but never used.","'Paper' is defined but never used.","'CircularProgress' is defined but never used.","no-empty-pattern","Unexpected empty object pattern.","ObjectPattern","'resp' is assigned a value but never used.","'Container' is defined but never used.","'AadharDataService' is defined but never used.","'ListItemIcon' is defined but never used.","'ListItemText' is defined but never used.","'isDeleting' is assigned a value but never used.","'useState' is defined but never used.","'ListSubheader' is defined but never used.","'Divider' is defined but never used.","'GroupAddIcon' is defined but never used.","'Card' is defined but never used.","'CardActions' is defined but never used.","'CardContent' is defined but never used.","'Box' is defined but never used.","'NotificationsActiveIcon' is defined but never used.","'PeakPwa' is defined but never used.","'isLoading' is assigned a value but never used.","'handleClick' is assigned a value but never used.","'FormContainer' is defined but never used.","'syncedItems' is assigned a value but never used.","'setSyncedItems' is assigned a value but never used.","'closeSnackbar' is assigned a value but never used.","React Hook useEffect has a missing dependency: 'loadList'. Either include it or remove the dependency array.",["485"],"'fetchData' is defined but never used.","'setIsUploading' is assigned a value but never used.","Effect callbacks are synchronous to prevent race conditions. Put the async function inside:\n\nuseEffect(() => {\n  async function fetchData() {\n    // You can await here\n    const response = await MyAPI.getData(someId);\n    // ...\n  }\n  fetchData();\n}, [someId]); // Or [] if effect doesn't need props or state\n\nLearn more about data fetching with Hooks: https://reactjs.org/link/hooks-data-fetching","ArrowFunctionExpression","'DailyActivityList' is defined but never used.","'isUploading' is assigned a value but never used.","'axios' is defined but never used.","'CardActionArea' is defined but never used.","'CheckCircleIcon' is defined but never used.","'path' is assigned a value but never used.","'setPath' is assigned a value but never used.","'setLoading' is assigned a value but never used.","'res' is assigned a value but never used.","'AuthService' is defined but never used.","'getQueryParam' is defined but never used.","'Switch' is defined but never used.","'Route' is defined but never used.","no-global-assign","no-unsafe-negation",{"desc":"486","fix":"487"},{"desc":"486","fix":"488"},[232,245],"",{"messageId":"489","fix":"490","desc":"491"},{"messageId":"492","fix":"493","desc":"494"},{"desc":"495","fix":"496"},"Update the dependencies array to be: [history]",{"range":"497","text":"498"},{"range":"499","text":"498"},"removeEscape",{"range":"500","text":"482"},"Remove the `\\`. This maintains the current functionality.","escapeBackslash",{"range":"501","text":"502"},"Replace the `\\` with `\\\\` to include the actual backslash character.","Update the dependencies array to be: [loadList, selectedDate]",{"range":"503","text":"504"},[1783,1785],"[history]",[889,891],[9885,9886],[9885,9885],"\\",[2789,2803],"[loadList, selectedDate]"]